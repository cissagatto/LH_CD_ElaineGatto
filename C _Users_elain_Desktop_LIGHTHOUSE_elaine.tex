\documentclass[11pt]{article}

    \usepackage[breakable]{tcolorbox}
    \usepackage{parskip} % Stop auto-indenting (to mimic markdown behaviour)
    
    \usepackage{iftex}
    \ifPDFTeX
    	\usepackage[T1]{fontenc}
    	\usepackage{mathpazo}
    \else
    	\usepackage{fontspec}
    \fi

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % Maintain compatibility with old templates. Remove in nbconvert 6.0
    \let\Oldincludegraphics\includegraphics
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionFormat{nocaption}{}
    \captionsetup{format=nocaption,aboveskip=0pt,belowskip=0pt}

    \usepackage{float}
    \floatplacement{figure}{H} % forces figures to be placed at the correct location
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range
    \makeatletter % fix for old versions of grffile with XeLaTeX
    \@ifpackagelater{grffile}{2019/11/01}
    {
      % Do nothing on new versions
    }
    {
      \def\Gread@@xetex#1{%
        \IfFileExists{"\Gin@base".bb}%
        {\Gread@eps{\Gin@base.bb}}%
        {\Gread@@xetex@aux#1}%
      }
    }
    \makeatother
    \usepackage[Export]{adjustbox} % Used to constrain images to a maximum size
    \adjustboxset{max size={0.9\linewidth}{0.9\paperheight}}

    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    % The default LaTeX title has an obnoxious amount of whitespace. By default,
    % titling removes some of it. It also provides customization options.
    \usepackage{titling}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    \usepackage{mathrsfs}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % common color for the border for error outputs.
    \definecolor{outerrorbackground}{HTML}{FFDFDF}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatibility definitions
    \def\gt{>}
    \def\lt{<}
    \let\Oldtex\TeX
    \let\Oldlatex\LaTeX
    \renewcommand{\TeX}{\textrm{\Oldtex}}
    \renewcommand{\LaTeX}{\textrm{\Oldlatex}}
    % Document parameters
    % Document title
    \title{C:\textbackslash{}Users\textbackslash{}elain\textbackslash{}Desktop\textbackslash{}LIGHTHOUSE\textbackslash{}elaine}
    
    
    
    
    
% Pygments definitions
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\@namedef{PY@tok@w}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\@namedef{PY@tok@c}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@cp}{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\@namedef{PY@tok@k}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kt}{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\@namedef{PY@tok@o}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ow}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@nb}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nf}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@ne}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\@namedef{PY@tok@nv}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@no}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\@namedef{PY@tok@nl}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\@namedef{PY@tok@ni}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\@namedef{PY@tok@na}{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\@namedef{PY@tok@nt}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nd}{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@s}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sd}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@si}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\@namedef{PY@tok@se}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\@namedef{PY@tok@sr}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\@namedef{PY@tok@ss}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sx}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@m}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@gh}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@gu}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\@namedef{PY@tok@gd}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\@namedef{PY@tok@gi}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\@namedef{PY@tok@gr}{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\@namedef{PY@tok@ge}{\let\PY@it=\textit}
\@namedef{PY@tok@gs}{\let\PY@bf=\textbf}
\@namedef{PY@tok@gp}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@go}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\@namedef{PY@tok@gt}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\@namedef{PY@tok@err}{\def\PY@bc##1{{\setlength{\fboxsep}{\string -\fboxrule}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}}
\@namedef{PY@tok@kc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kd}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kr}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@bp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@fm}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@vc}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vg}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vi}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vm}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sa}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sb}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sc}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@dl}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s2}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sh}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s1}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@mb}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mf}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mh}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mi}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@il}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mo}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ch}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@cm}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@cpf}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@c1}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@cs}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb. 
    \makeatletter
        \newbox\Wrappedcontinuationbox 
        \newbox\Wrappedvisiblespacebox 
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}} 
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}} 
        \newcommand*\Wrappedcontinuationindent {3ex } 
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox} 
        % Take advantage of the already applied Pygments mark-up to insert 
        % potential linebreaks for TeX processing. 
        %        {, <, #, %, $, ' and ": go to next line. 
        %        _, }, ^, &, >, - and ~: stay at end of broken line. 
        % Use of \textquotesingle for straight quote. 
        \newcommand*\Wrappedbreaksatspecials {% 
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}% 
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}% 
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}% 
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}% 
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}% 
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}% 
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}% 
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}% 
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}% 
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}% 
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}% 
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}% 
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}% 
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}% 
        } 
        % Some characters . , ; ? ! / are not pygmentized. 
        % This macro makes them "active" and they will insert potential linebreaks 
        \newcommand*\Wrappedbreaksatpunct {% 
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}% 
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}% 
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}% 
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}% 
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}% 
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}% 
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}% 
            \catcode`\.\active
            \catcode`\,\active 
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active 
            \lccode`\~`\~ 	
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%
        
        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active 	
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}
    
    % prompt
    \makeatletter
    \newcommand{\boxspacing}{\kern\kvtcb@left@rule\kern\kvtcb@boxsep}
    \makeatother
    \newcommand{\prompt}[4]{
        {\ttfamily\llap{{\color{#2}[#3]:\hspace{3pt}#4}}\vspace{-\baselineskip}}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

\begin{document}
    
    \maketitle
    
    

    
    \hypertarget{desafio}{%
\subsection{Desafio}\label{desafio}}

Você foi alocado(a) em um time da Indicium que está trabalhando
atualmente junto a um cliente no processo de criação de uma plataforma
de aluguéis temporários na cidade de Nova York. Para o desenvolvimento
de sua estratégia de precificação, pediu para que a Indicium fizesse uma
análise exploratória dos dados de seu maior concorrente, assim como um
teste de validação de um modelo preditivo.

Seu objetivo é desenvolver um modelo de previsão de preços a partir do
dataset oferecido, e avaliar tal modelo utilizando as métricas de
avaliação que mais fazem sentido para o problema. O uso de outras fontes
de dados além do dataset é permitido (e encorajado). Você poderá
encontrar em anexo um dicionário dos dados.

    \hypertarget{dicionuxe1rio-dos-dados}{%
\subsection{Dicionário dos dados}\label{dicionuxe1rio-dos-dados}}

\begin{verbatim}
A base de dados de treinamento contém 16 colunas. Seus nomes são auto-explicativos, mas, caso haja alguma dúvida, a descrição das colunas é:
\end{verbatim}

\textbf{id} -- Atua como uma chave exclusiva para cada anúncio nos dados
do aplicativo \textbf{nome} - Representa o nome do anúncio
\textbf{host\_id} - Representa o id do usuário que hospedou o anúncio
\textbf{host\_name} -- Contém o nome do usuário que hospedou o anúncio
\textbf{bairro\_group} - Contém o nome do bairro onde o anúncio está
localizado \textbf{bairro} - Contém o nome da área onde o anúncio está
localizado \textbf{latitude} - Contém a latitude do local
\textbf{longitude} - Contém a longitude do local \textbf{room\_type} --
Contém o tipo de espaço de cada anúncio \textbf{price} - Contém o preço
por noite em dólares listado pelo anfitrião \textbf{minimo\_noites} -
Contém o número mínimo de noites que o usuário deve reservar
\textbf{numero\_de\_reviews} - Contém o número de comentários dados a
cada listagem \textbf{ultima\_review} - Contém a data da última revisão
dada à listagem \textbf{reviews\_por\_mes} - Contém o número de
avaliações fornecidas por mês \textbf{calculado\_host\_listings\_count}
- Contém a quantidade de imóveis por host \textbf{disponibilidade\_365}
- Contém o número de dias em que o anúncio está disponível para reserva

    \hypertarget{fauxe7a-uma-anuxe1lise-exploratuxf3ria-dos-dados-eda-demonstrando-as-principais-caracteruxedsticas-entre-as-variuxe1veis-e-apresentando-algumas-hipuxf3teses-de-neguxf3cio-relacionadas.-seja-criativo}{%
\subsubsection{1. Faça uma análise exploratória dos dados (EDA),
demonstrando as principais características entre as variáveis e
apresentando algumas hipóteses de negócio relacionadas. Seja
criativo!}\label{fauxe7a-uma-anuxe1lise-exploratuxf3ria-dos-dados-eda-demonstrando-as-principais-caracteruxedsticas-entre-as-variuxe1veis-e-apresentando-algumas-hipuxf3teses-de-neguxf3cio-relacionadas.-seja-criativo}}

Importando pacotes

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{208}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} em geral, prefiro colocar todos os imports em um lugar só}
\PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
\PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
\PY{k+kn}{import} \PY{n+nn}{statistics}
\PY{k+kn}{import} \PY{n+nn}{collections}
\PY{k+kn}{import} \PY{n+nn}{nltk}
\PY{k+kn}{import} \PY{n+nn}{string}
\PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}

\PY{k+kn}{import} \PY{n+nn}{plotly}\PY{n+nn}{.}\PY{n+nn}{express} \PY{k}{as} \PY{n+nn}{px}
\PY{k+kn}{import} \PY{n+nn}{plotly}\PY{n+nn}{.}\PY{n+nn}{graph\PYZus{}objs} \PY{k}{as} \PY{n+nn}{go}
\PY{k+kn}{import} \PY{n+nn}{plotly}\PY{n+nn}{.}\PY{n+nn}{offline} \PY{k}{as} \PY{n+nn}{py}
\PY{k+kn}{import} \PY{n+nn}{plotly}\PY{n+nn}{.}\PY{n+nn}{graph\PYZus{}objs} \PY{k}{as} \PY{n+nn}{go}
\PY{k+kn}{import} \PY{n+nn}{plotly}\PY{n+nn}{.}\PY{n+nn}{figure\PYZus{}factory} \PY{k}{as} \PY{n+nn}{ff}

\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{model\PYZus{}selection} \PY{k+kn}{import} \PY{n}{cross\PYZus{}val\PYZus{}predict}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{model\PYZus{}selection} \PY{k+kn}{import} \PY{n}{cross\PYZus{}val\PYZus{}score}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k+kn}{import} \PY{n}{StandardScaler}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k+kn}{import} \PY{n}{MinMaxScaler}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{model\PYZus{}selection} \PY{k+kn}{import} \PY{n}{train\PYZus{}test\PYZus{}split}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k+kn}{import} \PY{n}{LinearRegression}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k+kn}{import} \PY{n}{Ridge}\PY{p}{,} \PY{n}{Lasso}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{tree} \PY{k+kn}{import} \PY{n}{DecisionTreeRegressor}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{ensemble} \PY{k+kn}{import} \PY{n}{RandomForestRegressor}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{svm} \PY{k+kn}{import} \PY{n}{SVR}
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{metrics} \PY{k+kn}{import} \PY{n}{mean\PYZus{}absolute\PYZus{}error}\PY{p}{,} \PY{n}{mean\PYZus{}squared\PYZus{}error}\PY{p}{,} \PY{n}{r2\PYZus{}score} 
\PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{metrics} \PY{k+kn}{import} \PY{n}{mean\PYZus{}absolute\PYZus{}percentage\PYZus{}error}\PY{p}{,} \PY{n}{make\PYZus{}scorer}

\PY{k+kn}{from} \PY{n+nn}{nltk}\PY{n+nn}{.}\PY{n+nn}{tokenize} \PY{k+kn}{import} \PY{n}{word\PYZus{}tokenize}
\PY{k+kn}{from} \PY{n+nn}{nltk}\PY{n+nn}{.}\PY{n+nn}{corpus} \PY{k+kn}{import} \PY{n}{stopwords}

\PY{k+kn}{from} \PY{n+nn}{statistics} \PY{k+kn}{import} \PY{n}{mean}
\PY{k+kn}{from} \PY{n+nn}{scipy} \PY{k+kn}{import} \PY{n}{stats}

\PY{c+c1}{\PYZsh{} import scikit\PYZus{}posthocs as sp}

\PY{n}{py}\PY{o}{.}\PY{n}{init\PYZus{}notebook\PYZus{}mode}\PY{p}{(}\PY{n}{connected}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    
    
    Abrindo o arquivo

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{209}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{nome\PYZus{}do\PYZus{}arquivo} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{C:/Users/elain/Desktop/LIGHTHOUSE/teste\PYZus{}indicium\PYZus{}precificacao.csv}\PY{l+s+s2}{\PYZdq{}}
\PY{n}{dados} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{nome\PYZus{}do\PYZus{}arquivo}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    Verificando quantidade de registros e atributos. (16 - 1 é atributo
alvo: price)

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{210}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{shape}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{210}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
(48894, 16)
\end{Verbatim}
\end{tcolorbox}
        
    Verificando os tipos de dados

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{211}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 48894 entries, 0 to 48893
Data columns (total 16 columns):
 \#   Column                         Non-Null Count  Dtype
---  ------                         --------------  -----
 0   id                             48894 non-null  int64
 1   nome                           48878 non-null  object
 2   host\_id                        48894 non-null  int64
 3   host\_name                      48873 non-null  object
 4   bairro\_group                   48894 non-null  object
 5   bairro                         48894 non-null  object
 6   latitude                       48894 non-null  float64
 7   longitude                      48894 non-null  float64
 8   room\_type                      48894 non-null  object
 9   price                          48894 non-null  int64
 10  minimo\_noites                  48894 non-null  int64
 11  numero\_de\_reviews              48894 non-null  int64
 12  ultima\_review                  38842 non-null  object
 13  reviews\_por\_mes                38842 non-null  float64
 14  calculado\_host\_listings\_count  48894 non-null  int64
 15  disponibilidade\_365            48894 non-null  int64
dtypes: float64(3), int64(7), object(6)
memory usage: 6.0+ MB
    \end{Verbatim}

    Olhando para as estatísticas

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{212}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{212}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
                 id       host\_id      latitude     longitude         price  \textbackslash{}
count  4.889400e+04  4.889400e+04  48894.000000  48894.000000  48894.000000
mean   1.901753e+07  6.762139e+07     40.728951    -73.952169    152.720763
std    1.098288e+07  7.861118e+07      0.054529      0.046157    240.156625
min    2.595000e+03  2.438000e+03     40.499790    -74.244420      0.000000
25\%    9.472371e+06  7.822737e+06     40.690100    -73.983070     69.000000
50\%    1.967743e+07  3.079553e+07     40.723075    -73.955680    106.000000
75\%    2.915225e+07  1.074344e+08     40.763117    -73.936273    175.000000
max    3.648724e+07  2.743213e+08     40.913060    -73.712990  10000.000000

       minimo\_noites  numero\_de\_reviews  reviews\_por\_mes  \textbackslash{}
count   48894.000000       48894.000000     38842.000000
mean        7.030085          23.274758         1.373251
std        20.510741          44.550991         1.680453
min         1.000000           0.000000         0.010000
25\%         1.000000           1.000000         0.190000
50\%         3.000000           5.000000         0.720000
75\%         5.000000          24.000000         2.020000
max      1250.000000         629.000000        58.500000

       calculado\_host\_listings\_count  disponibilidade\_365
count                   48894.000000         48894.000000
mean                        7.144005           112.776169
std                        32.952855           131.618692
min                         1.000000             0.000000
25\%                         1.000000             0.000000
50\%                         1.000000            45.000000
75\%                         2.000000           227.000000
max                       327.000000           365.000000
\end{Verbatim}
\end{tcolorbox}
        
    Olhando para os 10 últimos registros

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{213}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{tail}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{213}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
             id                                               nome    host\_id  \textbackslash{}
48884  36482809    Stunning Bedroom NYC! Walking to Central Park!!  131529729
48885  36483010                    Comfy 1 Bedroom in Midtown East  274311461
48886  36483152    Garden Jewel Apartment in Williamsburg New York  208514239
48887  36484087  Spacious Room w/ Private Rooftop, Central loca{\ldots}  274321313
48888  36484363                                 QUIT PRIVATE HOUSE  107716952
48889  36484665    Charming one bedroom - newly renovated rowhouse    8232441
48890  36485057      Affordable room in Bushwick/East Williamsburg    6570630
48891  36485431            Sunny Studio at Historical Neighborhood   23492952
48892  36485609               43rd St. Time Square-cozy single bed   30985759
48893  36487245  Trendy duplex in the very heart of Hell's Kitchen   68119814

           host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
48884        Kendall    Manhattan         East Harlem  40.79633  -73.93605
48885          Scott    Manhattan             Midtown  40.75561  -73.96723
48886          Melki     Brooklyn        Williamsburg  40.71232  -73.94220
48887            Kat    Manhattan      Hell's Kitchen  40.76392  -73.99183
48888        Michael       Queens             Jamaica  40.69137  -73.80844
48889        Sabrina     Brooklyn  Bedford-Stuyvesant  40.67853  -73.94995
48890        Marisol     Brooklyn            Bushwick  40.70184  -73.93317
48891  Ilgar \& Aysel    Manhattan              Harlem  40.81475  -73.94867
48892            Taz    Manhattan      Hell's Kitchen  40.75751  -73.99112
48893     Christophe    Manhattan      Hell's Kitchen  40.76404  -73.98933

             room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
48884     Private room     75              2                  0           NaN
48885  Entire home/apt    200              6                  0           NaN
48886  Entire home/apt    170              1                  0           NaN
48887     Private room    125              4                  0           NaN
48888     Private room     65              1                  0           NaN
48889     Private room     70              2                  0           NaN
48890     Private room     40              4                  0           NaN
48891  Entire home/apt    115             10                  0           NaN
48892      Shared room     55              1                  0           NaN
48893     Private room     90              7                  0           NaN

       reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365
48884              NaN                              2                  353
48885              NaN                              1                  176
48886              NaN                              3                  365
48887              NaN                              1                   31
48888              NaN                              2                  163
48889              NaN                              2                    9
48890              NaN                              2                   36
48891              NaN                              1                   27
48892              NaN                              6                    2
48893              NaN                              1                   23
\end{Verbatim}
\end{tcolorbox}
        
    Olhando para os 10 primeiros registros

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{214}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{214}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
     id                                              nome  host\_id  \textbackslash{}
0  2595                             Skylit Midtown Castle     2845
1  3647               THE VILLAGE OF HARLEM{\ldots}NEW YORK !     4632
2  3831                   Cozy Entire Floor of Brownstone     4869
3  5022  Entire Apt: Spacious Studio/Loft by central park     7192
4  5099         Large Cozy 1 BR Apartment In Midtown East     7322
5  5121                                   BlissArtsSpace!     7356
6  5178                  Large Furnished Room Near B'way      8967
7  5203                Cozy Clean Guest Room - Family Apt     7490
8  5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9  5295                  Beautiful 1br on Upper West Side     7702

     host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0     Jennifer    Manhattan             Midtown  40.75362  -73.98377
1    Elisabeth    Manhattan              Harlem  40.80902  -73.94190
2  LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3        Laura    Manhattan         East Harlem  40.79851  -73.94399
4        Chris    Manhattan         Murray Hill  40.74767  -73.97500
5        Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6     Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7    MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8          Ben    Manhattan           Chinatown  40.71344  -73.99037
9         Lena    Manhattan     Upper West Side  40.80316  -73.96545

         room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
0  Entire home/apt    225              1                 45    2019-05-21
1     Private room    150              3                  0           NaN
2  Entire home/apt     89              1                270    2019-07-05
3  Entire home/apt     80             10                  9    2018-11-19
4  Entire home/apt    200              3                 74    2019-06-22
5     Private room     60             45                 49    2017-10-05
6     Private room     79              2                430    2019-06-24
7     Private room     79              2                118    2017-07-21
8  Entire home/apt    150              1                160    2019-06-09
9  Entire home/apt    135              5                 53    2019-06-22

   reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365
0             0.38                              2                  355
1              NaN                              1                  365
2             4.64                              1                  194
3             0.10                              1                    0
4             0.59                              1                  129
5             0.40                              1                    0
6             3.47                              1                  220
7             0.99                              1                    0
8             1.33                              4                  188
9             0.43                              1                    6
\end{Verbatim}
\end{tcolorbox}
        
    Verificar os NANS

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{215}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{colunas\PYZus{}nan} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{columns}\PY{p}{[}\PY{n}{dados}\PY{o}{.}\PY{n}{isna}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{any}\PY{p}{(}\PY{p}{)}\PY{p}{]}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}
\PY{n}{colunas\PYZus{}nan}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{215}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
['nome', 'host\_name', 'ultima\_review', 'reviews\_por\_mes']
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{216}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{n}{colunas\PYZus{}nan}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                                                    nome      host\_name  \textbackslash{}
0                                  Skylit Midtown Castle       Jennifer
1                    THE VILLAGE OF HARLEM{\ldots}NEW YORK !      Elisabeth
2                        Cozy Entire Floor of Brownstone    LisaRoxanne
3       Entire Apt: Spacious Studio/Loft by central park          Laura
4              Large Cozy 1 BR Apartment In Midtown East          Chris
{\ldots}                                                  {\ldots}            {\ldots}
48889    Charming one bedroom - newly renovated rowhouse        Sabrina
48890      Affordable room in Bushwick/East Williamsburg        Marisol
48891            Sunny Studio at Historical Neighborhood  Ilgar \& Aysel
48892               43rd St. Time Square-cozy single bed            Taz
48893  Trendy duplex in the very heart of Hell's Kitchen     Christophe

      ultima\_review  reviews\_por\_mes
0        2019-05-21             0.38
1               NaN              NaN
2        2019-07-05             4.64
3        2018-11-19             0.10
4        2019-06-22             0.59
{\ldots}             {\ldots}              {\ldots}
48889           NaN              NaN
48890           NaN              NaN
48891           NaN              NaN
48892           NaN              NaN
48893           NaN              NaN

[48894 rows x 4 columns]
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{217}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{linhas\PYZus{}nan} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{n}{dados}\PY{o}{.}\PY{n}{isna}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{any}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{]}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{linhas\PYZus{}nan}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
             id                                               nome   host\_id  \textbackslash{}
1          3647                THE VILLAGE OF HARLEM{\ldots}NEW YORK !      4632
18         7750                  Huge 2 BR Upper East  Cental Park     17985
25         8700  Magnifique Suite au N de Manhattan - vue Cloitres     26394
35        11452                        Clean and Quiet in Brooklyn      7355
37        11943                          Country space in the city     45445
{\ldots}         {\ldots}                                                {\ldots}       {\ldots}
48889  36484665    Charming one bedroom - newly renovated rowhouse   8232441
48890  36485057      Affordable room in Bushwick/East Williamsburg   6570630
48891  36485431            Sunny Studio at Historical Neighborhood  23492952
48892  36485609               43rd St. Time Square-cozy single bed  30985759
48893  36487245  Trendy duplex in the very heart of Hell's Kitchen  68119814

             host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
1            Elisabeth    Manhattan              Harlem  40.80902  -73.94190
18                Sing    Manhattan         East Harlem  40.79685  -73.94872
25     Claude \& Sophie    Manhattan              Inwood  40.86754  -73.92639
35                  Vt     Brooklyn  Bedford-Stuyvesant  40.68876  -73.94312
37             Harriet     Brooklyn            Flatbush  40.63702  -73.96327
{\ldots}                {\ldots}          {\ldots}                 {\ldots}       {\ldots}        {\ldots}
48889          Sabrina     Brooklyn  Bedford-Stuyvesant  40.67853  -73.94995
48890          Marisol     Brooklyn            Bushwick  40.70184  -73.93317
48891    Ilgar \& Aysel    Manhattan              Harlem  40.81475  -73.94867
48892              Taz    Manhattan      Hell's Kitchen  40.75751  -73.99112
48893       Christophe    Manhattan      Hell's Kitchen  40.76404  -73.98933

             room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
1         Private room    150              3                  0           NaN
18     Entire home/apt    190              7                  0           NaN
25        Private room     80              4                  0           NaN
35        Private room     35             60                  0           NaN
37        Private room    150              1                  0           NaN
{\ldots}                {\ldots}    {\ldots}            {\ldots}                {\ldots}           {\ldots}
48889     Private room     70              2                  0           NaN
48890     Private room     40              4                  0           NaN
48891  Entire home/apt    115             10                  0           NaN
48892      Shared room     55              1                  0           NaN
48893     Private room     90              7                  0           NaN

       reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365
1                  NaN                              1                  365
18                 NaN                              2                  249
25                 NaN                              1                    0
35                 NaN                              1                  365
37                 NaN                              1                  365
{\ldots}                {\ldots}                            {\ldots}                  {\ldots}
48889              NaN                              2                    9
48890              NaN                              2                   36
48891              NaN                              1                   27
48892              NaN                              6                    2
48893              NaN                              1                   23

[10074 rows x 16 columns]
    \end{Verbatim}

    Dados ausentes com ISNA

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{218}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{isna}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{218}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
id                                   0
nome                                16
host\_id                              0
host\_name                           21
bairro\_group                         0
bairro                               0
latitude                             0
longitude                            0
room\_type                            0
price                                0
minimo\_noites                        0
numero\_de\_reviews                    0
ultima\_review                    10052
reviews\_por\_mes                  10052
calculado\_host\_listings\_count        0
disponibilidade\_365                  0
dtype: int64
\end{Verbatim}
\end{tcolorbox}
        
    Dados ausentes com ISNULL

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{219}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{isnull}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{219}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
id                                   0
nome                                16
host\_id                              0
host\_name                           21
bairro\_group                         0
bairro                               0
latitude                             0
longitude                            0
room\_type                            0
price                                0
minimo\_noites                        0
numero\_de\_reviews                    0
ultima\_review                    10052
reviews\_por\_mes                  10052
calculado\_host\_listings\_count        0
disponibilidade\_365                  0
dtype: int64
\end{Verbatim}
\end{tcolorbox}
        
    Porcentagem de dados ausentes do atributo NOME com nan

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{220}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{porcentagem} \PY{o}{=} \PY{l+m+mi}{16}\PY{o}{/}\PY{n}{dados}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
\PY{n}{porcentagem}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{220}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
0.0003272385159733301
\end{Verbatim}
\end{tcolorbox}
        
    Porcentagem de dados ausentes do atributo HOST\_NAME com nan

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{221}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{porcentagem} \PY{o}{=} \PY{l+m+mi}{21}\PY{o}{/}\PY{n}{dados}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
\PY{n}{porcentagem}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{221}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
0.0004295005522149957
\end{Verbatim}
\end{tcolorbox}
        
    20\% de reviews\_por\_mes e ultima\_review são dados ausentes

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{222}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{porcentagem} \PY{o}{=} \PY{l+m+mi}{10052}\PY{o}{/}\PY{n}{dados}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
\PY{n}{porcentagem}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{222}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
0.20558759766024462
\end{Verbatim}
\end{tcolorbox}
        
    Verificando se review\_por\_mes e ultima\_review tem distribuição
normal. Como vemos nos gráficos a distribuição não é normal. Nesse caso
substitui-se os valores ausentes pela mediana. Se fosse uma distribuição
normal, os valores ausentes seriam substituido pela média. A média ou a
mediana devem ser calculadas sem os valores ausentes.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{223}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{fig} \PY{o}{=} \PY{n}{go}\PY{o}{.}\PY{n}{Figure}\PY{p}{(}\PY{n}{data}\PY{o}{=}\PY{p}{[}\PY{n}{go}\PY{o}{.}\PY{n}{Histogram}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reviews\PYZus{}por\PYZus{}mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{]}\PY{p}{)}
\PY{n}{fig}\PY{o}{.}\PY{n}{update\PYZus{}layout}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Histograma}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                 \PY{n}{xaxis\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Valores}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                 \PY{n}{yaxis\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Frequencia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{fig}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    
    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{224}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{fig} \PY{o}{=} \PY{n}{go}\PY{o}{.}\PY{n}{Figure}\PY{p}{(}\PY{n}{data}\PY{o}{=}\PY{p}{[}\PY{n}{go}\PY{o}{.}\PY{n}{Histogram}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{]}\PY{p}{)}
\PY{n}{fig}\PY{o}{.}\PY{n}{update\PYZus{}layout}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Histograma}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                 \PY{n}{xaxis\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Valores}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                 \PY{n}{yaxis\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Frequencia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{fig}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    
    
    Removendo os valores ausentes do calculo da mediana

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{225}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados2} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{p}{)}
\PY{n}{dados2}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{225}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
      id                                              nome  host\_id  \textbackslash{}
0   2595                             Skylit Midtown Castle     2845
2   3831                   Cozy Entire Floor of Brownstone     4869
3   5022  Entire Apt: Spacious Studio/Loft by central park     7192
4   5099         Large Cozy 1 BR Apartment In Midtown East     7322
5   5121                                   BlissArtsSpace!     7356
6   5178                  Large Furnished Room Near B'way      8967
7   5203                Cozy Clean Guest Room - Family Apt     7490
8   5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9   5295                  Beautiful 1br on Upper West Side     7702
10  5441                   Central Manhattan/near Broadway     7989

      host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0      Jennifer    Manhattan             Midtown  40.75362  -73.98377
2   LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3         Laura    Manhattan         East Harlem  40.79851  -73.94399
4         Chris    Manhattan         Murray Hill  40.74767  -73.97500
5         Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6      Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7     MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8           Ben    Manhattan           Chinatown  40.71344  -73.99037
9          Lena    Manhattan     Upper West Side  40.80316  -73.96545
10         Kate    Manhattan      Hell's Kitchen  40.76076  -73.98867

          room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
0   Entire home/apt    225              1                 45    2019-05-21
2   Entire home/apt     89              1                270    2019-07-05
3   Entire home/apt     80             10                  9    2018-11-19
4   Entire home/apt    200              3                 74    2019-06-22
5      Private room     60             45                 49    2017-10-05
6      Private room     79              2                430    2019-06-24
7      Private room     79              2                118    2017-07-21
8   Entire home/apt    150              1                160    2019-06-09
9   Entire home/apt    135              5                 53    2019-06-22
10     Private room     85              2                188    2019-06-23

    reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365
0              0.38                              2                  355
2              4.64                              1                  194
3              0.10                              1                    0
4              0.59                              1                  129
5              0.40                              1                    0
6              3.47                              1                  220
7              0.99                              1                    0
8              1.33                              4                  188
9              0.43                              1                    6
10             1.50                              1                   39
\end{Verbatim}
\end{tcolorbox}
        
    Calculando a mediana

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{226}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{statistics}\PY{o}{.}\PY{n}{median}\PY{p}{(}\PY{n}{dados2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reviews\PYZus{}por\PYZus{}mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{226}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
0.72
\end{Verbatim}
\end{tcolorbox}
        
    Substituindo os valores ausentes

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{227}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reviews\PYZus{}por\PYZus{}mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reviews\PYZus{}por\PYZus{}mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{fillna}\PY{p}{(}\PY{l+m+mf}{0.72}\PY{p}{)}
\PY{n}{dados}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{227}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
     id                                              nome  host\_id  \textbackslash{}
0  2595                             Skylit Midtown Castle     2845
1  3647               THE VILLAGE OF HARLEM{\ldots}NEW YORK !     4632
2  3831                   Cozy Entire Floor of Brownstone     4869
3  5022  Entire Apt: Spacious Studio/Loft by central park     7192
4  5099         Large Cozy 1 BR Apartment In Midtown East     7322
5  5121                                   BlissArtsSpace!     7356
6  5178                  Large Furnished Room Near B'way      8967
7  5203                Cozy Clean Guest Room - Family Apt     7490
8  5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9  5295                  Beautiful 1br on Upper West Side     7702

     host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0     Jennifer    Manhattan             Midtown  40.75362  -73.98377
1    Elisabeth    Manhattan              Harlem  40.80902  -73.94190
2  LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3        Laura    Manhattan         East Harlem  40.79851  -73.94399
4        Chris    Manhattan         Murray Hill  40.74767  -73.97500
5        Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6     Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7    MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8          Ben    Manhattan           Chinatown  40.71344  -73.99037
9         Lena    Manhattan     Upper West Side  40.80316  -73.96545

         room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
0  Entire home/apt    225              1                 45    2019-05-21
1     Private room    150              3                  0           NaN
2  Entire home/apt     89              1                270    2019-07-05
3  Entire home/apt     80             10                  9    2018-11-19
4  Entire home/apt    200              3                 74    2019-06-22
5     Private room     60             45                 49    2017-10-05
6     Private room     79              2                430    2019-06-24
7     Private room     79              2                118    2017-07-21
8  Entire home/apt    150              1                160    2019-06-09
9  Entire home/apt    135              5                 53    2019-06-22

   reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365
0             0.38                              2                  355
1             0.72                              1                  365
2             4.64                              1                  194
3             0.10                              1                    0
4             0.59                              1                  129
5             0.40                              1                    0
6             3.47                              1                  220
7             0.99                              1                    0
8             1.33                              4                  188
9             0.43                              1                    6
\end{Verbatim}
\end{tcolorbox}
        
    Preenchendo os NANS da data com um valor 0

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{228}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{fillna}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{0000\PYZhy{}00\PYZhy{}00}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{dados}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{228}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
     id                                              nome  host\_id  \textbackslash{}
0  2595                             Skylit Midtown Castle     2845
1  3647               THE VILLAGE OF HARLEM{\ldots}NEW YORK !     4632
2  3831                   Cozy Entire Floor of Brownstone     4869
3  5022  Entire Apt: Spacious Studio/Loft by central park     7192
4  5099         Large Cozy 1 BR Apartment In Midtown East     7322
5  5121                                   BlissArtsSpace!     7356
6  5178                  Large Furnished Room Near B'way      8967
7  5203                Cozy Clean Guest Room - Family Apt     7490
8  5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9  5295                  Beautiful 1br on Upper West Side     7702

     host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0     Jennifer    Manhattan             Midtown  40.75362  -73.98377
1    Elisabeth    Manhattan              Harlem  40.80902  -73.94190
2  LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3        Laura    Manhattan         East Harlem  40.79851  -73.94399
4        Chris    Manhattan         Murray Hill  40.74767  -73.97500
5        Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6     Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7    MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8          Ben    Manhattan           Chinatown  40.71344  -73.99037
9         Lena    Manhattan     Upper West Side  40.80316  -73.96545

         room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
0  Entire home/apt    225              1                 45    2019-05-21
1     Private room    150              3                  0    0000-00-00
2  Entire home/apt     89              1                270    2019-07-05
3  Entire home/apt     80             10                  9    2018-11-19
4  Entire home/apt    200              3                 74    2019-06-22
5     Private room     60             45                 49    2017-10-05
6     Private room     79              2                430    2019-06-24
7     Private room     79              2                118    2017-07-21
8  Entire home/apt    150              1                160    2019-06-09
9  Entire home/apt    135              5                 53    2019-06-22

   reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365
0             0.38                              2                  355
1             0.72                              1                  365
2             4.64                              1                  194
3             0.10                              1                    0
4             0.59                              1                  129
5             0.40                              1                    0
6             3.47                              1                  220
7             0.99                              1                    0
8             1.33                              4                  188
9             0.43                              1                    6
\end{Verbatim}
\end{tcolorbox}
        
    Verificando a frequencia das datas

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{229}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{res} \PY{o}{=} \PY{n}{collections}\PY{o}{.}\PY{n}{Counter}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}res} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{res}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{res}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{frequencia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}res}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{frequencia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{229}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
             res  frequencia
1     0000-00-00       10052
9     2019-06-23        1413
13    2019-07-01        1359
38    2019-06-30        1341
6     2019-06-24         875
{\ldots}          {\ldots}         {\ldots}
913   2013-12-14           1
1422  2015-04-12           1
931   2014-11-30           1
934   2014-06-02           1
1764  2018-03-29           1

[1765 rows x 2 columns]
\end{Verbatim}
\end{tcolorbox}
        
    Removendo todos os registros em que data é igual a 0000-00-00.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{230}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados3} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{!=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{0000\PYZhy{}00\PYZhy{}00}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n}{dados3}\PY{o}{.}\PY{n}{shape}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{230}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
(38842, 16)
\end{Verbatim}
\end{tcolorbox}
        
    Agora posso converter essas datas em date time

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{231}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{datas} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{dados3}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{datas}\PY{o}{.}\PY{n}{tail}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{231}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
48633   2019-07-05
48635   2019-07-06
48700   2019-07-08
48731   2019-07-06
48739   2019-07-07
48781   2019-07-07
48789   2019-07-07
48798   2019-07-07
48804   2019-07-07
48851   2019-07-08
Name: ultima\_review, dtype: datetime64[ns]
\end{Verbatim}
\end{tcolorbox}
        
    Calculando a mediana das datas que agora são consideradas como série
temporais

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{232}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{datas}\PY{o}{.}\PY{n}{median}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{232}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
Timestamp('2019-05-19 00:00:00')
\end{Verbatim}
\end{tcolorbox}
        
    Agora posso substituir todas as datas 0000-00-00 pela data encontrada
pela mediana

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{233}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0000\PYZhy{}00\PYZhy{}00}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{2019\PYZhy{}05\PYZhy{}19}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{dados}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{233}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
     id                                              nome  host\_id  \textbackslash{}
0  2595                             Skylit Midtown Castle     2845
1  3647               THE VILLAGE OF HARLEM{\ldots}NEW YORK !     4632
2  3831                   Cozy Entire Floor of Brownstone     4869
3  5022  Entire Apt: Spacious Studio/Loft by central park     7192
4  5099         Large Cozy 1 BR Apartment In Midtown East     7322
5  5121                                   BlissArtsSpace!     7356
6  5178                  Large Furnished Room Near B'way      8967
7  5203                Cozy Clean Guest Room - Family Apt     7490
8  5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9  5295                  Beautiful 1br on Upper West Side     7702

     host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0     Jennifer    Manhattan             Midtown  40.75362  -73.98377
1    Elisabeth    Manhattan              Harlem  40.80902  -73.94190
2  LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3        Laura    Manhattan         East Harlem  40.79851  -73.94399
4        Chris    Manhattan         Murray Hill  40.74767  -73.97500
5        Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6     Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7    MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8          Ben    Manhattan           Chinatown  40.71344  -73.99037
9         Lena    Manhattan     Upper West Side  40.80316  -73.96545

         room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
0  Entire home/apt    225              1                 45    2019-05-21
1     Private room    150              3                  0    2019-05-19
2  Entire home/apt     89              1                270    2019-07-05
3  Entire home/apt     80             10                  9    2018-11-19
4  Entire home/apt    200              3                 74    2019-06-22
5     Private room     60             45                 49    2017-10-05
6     Private room     79              2                430    2019-06-24
7     Private room     79              2                118    2017-07-21
8  Entire home/apt    150              1                160    2019-06-09
9  Entire home/apt    135              5                 53    2019-06-22

   reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365
0             0.38                              2                  355
1             0.72                              1                  365
2             4.64                              1                  194
3             0.10                              1                    0
4             0.59                              1                  129
5             0.40                              1                    0
6             3.47                              1                  220
7             0.99                              1                    0
8             1.33                              4                  188
9             0.43                              1                    6
\end{Verbatim}
\end{tcolorbox}
        
    Agora vamos separar mês, dia e ano em novas colunas

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{234}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ano}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{str}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{expand}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{dados}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{234}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
     id                                              nome  host\_id  \textbackslash{}
0  2595                             Skylit Midtown Castle     2845
1  3647               THE VILLAGE OF HARLEM{\ldots}NEW YORK !     4632
2  3831                   Cozy Entire Floor of Brownstone     4869
3  5022  Entire Apt: Spacious Studio/Loft by central park     7192
4  5099         Large Cozy 1 BR Apartment In Midtown East     7322
5  5121                                   BlissArtsSpace!     7356
6  5178                  Large Furnished Room Near B'way      8967
7  5203                Cozy Clean Guest Room - Family Apt     7490
8  5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9  5295                  Beautiful 1br on Upper West Side     7702

     host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0     Jennifer    Manhattan             Midtown  40.75362  -73.98377
1    Elisabeth    Manhattan              Harlem  40.80902  -73.94190
2  LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3        Laura    Manhattan         East Harlem  40.79851  -73.94399
4        Chris    Manhattan         Murray Hill  40.74767  -73.97500
5        Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6     Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7    MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8          Ben    Manhattan           Chinatown  40.71344  -73.99037
9         Lena    Manhattan     Upper West Side  40.80316  -73.96545

         room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
0  Entire home/apt    225              1                 45    2019-05-21
1     Private room    150              3                  0    2019-05-19
2  Entire home/apt     89              1                270    2019-07-05
3  Entire home/apt     80             10                  9    2018-11-19
4  Entire home/apt    200              3                 74    2019-06-22
5     Private room     60             45                 49    2017-10-05
6     Private room     79              2                430    2019-06-24
7     Private room     79              2                118    2017-07-21
8  Entire home/apt    150              1                160    2019-06-09
9  Entire home/apt    135              5                 53    2019-06-22

   reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365   ano  \textbackslash{}
0             0.38                              2                  355  2019
1             0.72                              1                  365  2019
2             4.64                              1                  194  2019
3             0.10                              1                    0  2018
4             0.59                              1                  129  2019
5             0.40                              1                    0  2017
6             3.47                              1                  220  2019
7             0.99                              1                    0  2017
8             1.33                              4                  188  2019
9             0.43                              1                    6  2019

  mes dia
0  05  21
1  05  19
2  07  05
3  11  19
4  06  22
5  10  05
6  06  24
7  07  21
8  06  09
9  06  22
\end{Verbatim}
\end{tcolorbox}
        
    Verificando os tipos de dados e atributos com o novo dataframe

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{235}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 48894 entries, 0 to 48893
Data columns (total 19 columns):
 \#   Column                         Non-Null Count  Dtype
---  ------                         --------------  -----
 0   id                             48894 non-null  int64
 1   nome                           48878 non-null  object
 2   host\_id                        48894 non-null  int64
 3   host\_name                      48873 non-null  object
 4   bairro\_group                   48894 non-null  object
 5   bairro                         48894 non-null  object
 6   latitude                       48894 non-null  float64
 7   longitude                      48894 non-null  float64
 8   room\_type                      48894 non-null  object
 9   price                          48894 non-null  int64
 10  minimo\_noites                  48894 non-null  int64
 11  numero\_de\_reviews              48894 non-null  int64
 12  ultima\_review                  48894 non-null  object
 13  reviews\_por\_mes                48894 non-null  float64
 14  calculado\_host\_listings\_count  48894 non-null  int64
 15  disponibilidade\_365            48894 non-null  int64
 16  ano                            48894 non-null  object
 17  mes                            48894 non-null  object
 18  dia                            48894 non-null  object
dtypes: float64(3), int64(7), object(9)
memory usage: 7.1+ MB
    \end{Verbatim}

    Dia, mês e ano estão como OBJECT, precisamos converter para inteiro

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{236}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{colunas} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ano}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\PY{n}{dados}\PY{p}{[}\PY{n}{colunas}\PY{p}{]} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{n}{colunas}\PY{p}{]}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{n+nb}{int}\PY{p}{)}
\PY{n}{dados}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{236}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
     id                                              nome  host\_id  \textbackslash{}
0  2595                             Skylit Midtown Castle     2845
1  3647               THE VILLAGE OF HARLEM{\ldots}NEW YORK !     4632
2  3831                   Cozy Entire Floor of Brownstone     4869
3  5022  Entire Apt: Spacious Studio/Loft by central park     7192
4  5099         Large Cozy 1 BR Apartment In Midtown East     7322
5  5121                                   BlissArtsSpace!     7356
6  5178                  Large Furnished Room Near B'way      8967
7  5203                Cozy Clean Guest Room - Family Apt     7490
8  5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9  5295                  Beautiful 1br on Upper West Side     7702

     host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0     Jennifer    Manhattan             Midtown  40.75362  -73.98377
1    Elisabeth    Manhattan              Harlem  40.80902  -73.94190
2  LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3        Laura    Manhattan         East Harlem  40.79851  -73.94399
4        Chris    Manhattan         Murray Hill  40.74767  -73.97500
5        Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6     Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7    MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8          Ben    Manhattan           Chinatown  40.71344  -73.99037
9         Lena    Manhattan     Upper West Side  40.80316  -73.96545

         room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
0  Entire home/apt    225              1                 45    2019-05-21
1     Private room    150              3                  0    2019-05-19
2  Entire home/apt     89              1                270    2019-07-05
3  Entire home/apt     80             10                  9    2018-11-19
4  Entire home/apt    200              3                 74    2019-06-22
5     Private room     60             45                 49    2017-10-05
6     Private room     79              2                430    2019-06-24
7     Private room     79              2                118    2017-07-21
8  Entire home/apt    150              1                160    2019-06-09
9  Entire home/apt    135              5                 53    2019-06-22

   reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365   ano  \textbackslash{}
0             0.38                              2                  355  2019
1             0.72                              1                  365  2019
2             4.64                              1                  194  2019
3             0.10                              1                    0  2018
4             0.59                              1                  129  2019
5             0.40                              1                    0  2017
6             3.47                              1                  220  2019
7             0.99                              1                    0  2017
8             1.33                              4                  188  2019
9             0.43                              1                    6  2019

   mes  dia
0    5   21
1    5   19
2    7    5
3   11   19
4    6   22
5   10    5
6    6   24
7    7   21
8    6    9
9    6   22
\end{Verbatim}
\end{tcolorbox}
        
    Também vamos converter a ultima\_review para data

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{237}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ultima\PYZus{}review}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{dados}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{237}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
     id                                              nome  host\_id  \textbackslash{}
0  2595                             Skylit Midtown Castle     2845
1  3647               THE VILLAGE OF HARLEM{\ldots}NEW YORK !     4632
2  3831                   Cozy Entire Floor of Brownstone     4869
3  5022  Entire Apt: Spacious Studio/Loft by central park     7192
4  5099         Large Cozy 1 BR Apartment In Midtown East     7322
5  5121                                   BlissArtsSpace!     7356
6  5178                  Large Furnished Room Near B'way      8967
7  5203                Cozy Clean Guest Room - Family Apt     7490
8  5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9  5295                  Beautiful 1br on Upper West Side     7702

     host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0     Jennifer    Manhattan             Midtown  40.75362  -73.98377
1    Elisabeth    Manhattan              Harlem  40.80902  -73.94190
2  LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3        Laura    Manhattan         East Harlem  40.79851  -73.94399
4        Chris    Manhattan         Murray Hill  40.74767  -73.97500
5        Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6     Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7    MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8          Ben    Manhattan           Chinatown  40.71344  -73.99037
9         Lena    Manhattan     Upper West Side  40.80316  -73.96545

         room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
0  Entire home/apt    225              1                 45    2019-05-21
1     Private room    150              3                  0    2019-05-19
2  Entire home/apt     89              1                270    2019-07-05
3  Entire home/apt     80             10                  9    2018-11-19
4  Entire home/apt    200              3                 74    2019-06-22
5     Private room     60             45                 49    2017-10-05
6     Private room     79              2                430    2019-06-24
7     Private room     79              2                118    2017-07-21
8  Entire home/apt    150              1                160    2019-06-09
9  Entire home/apt    135              5                 53    2019-06-22

   reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365   ano  \textbackslash{}
0             0.38                              2                  355  2019
1             0.72                              1                  365  2019
2             4.64                              1                  194  2019
3             0.10                              1                    0  2018
4             0.59                              1                  129  2019
5             0.40                              1                    0  2017
6             3.47                              1                  220  2019
7             0.99                              1                    0  2017
8             1.33                              4                  188  2019
9             0.43                              1                    6  2019

   mes  dia
0    5   21
1    5   19
2    7    5
3   11   19
4    6   22
5   10    5
6    6   24
7    7   21
8    6    9
9    6   22
\end{Verbatim}
\end{tcolorbox}
        
    Conferindo

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{238}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 48894 entries, 0 to 48893
Data columns (total 19 columns):
 \#   Column                         Non-Null Count  Dtype
---  ------                         --------------  -----
 0   id                             48894 non-null  int64
 1   nome                           48878 non-null  object
 2   host\_id                        48894 non-null  int64
 3   host\_name                      48873 non-null  object
 4   bairro\_group                   48894 non-null  object
 5   bairro                         48894 non-null  object
 6   latitude                       48894 non-null  float64
 7   longitude                      48894 non-null  float64
 8   room\_type                      48894 non-null  object
 9   price                          48894 non-null  int64
 10  minimo\_noites                  48894 non-null  int64
 11  numero\_de\_reviews              48894 non-null  int64
 12  ultima\_review                  48894 non-null  datetime64[ns]
 13  reviews\_por\_mes                48894 non-null  float64
 14  calculado\_host\_listings\_count  48894 non-null  int64
 15  disponibilidade\_365            48894 non-null  int64
 16  ano                            48894 non-null  int32
 17  mes                            48894 non-null  int32
 18  dia                            48894 non-null  int32
dtypes: datetime64[ns](1), float64(3), int32(3), int64(7), object(5)
memory usage: 6.5+ MB
    \end{Verbatim}

    Plotando um gráfico para cada atributo

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{239}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{dados}\PY{o}{.}\PY{n}{columns}\PY{p}{:}
    \PY{n}{fig} \PY{o}{=} \PY{n}{go}\PY{o}{.}\PY{n}{Figure}\PY{p}{(}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}trace}\PY{p}{(}\PY{n}{go}\PY{o}{.}\PY{n}{Scatter}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{n}{dados}\PY{o}{.}\PY{n}{index}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{n}{dados}\PY{p}{[}\PY{n}{col}\PY{p}{]}\PY{p}{,} \PY{n}{mode}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lines}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{name}\PY{o}{=}\PY{n}{col}\PY{p}{)}\PY{p}{)}
    \PY{n}{fig}\PY{o}{.}\PY{n}{update\PYZus{}layout}\PY{p}{(}\PY{n}{title}\PY{o}{=}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gráfico de Linhas \PYZhy{} }\PY{l+s+si}{\PYZob{}}\PY{n}{col}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{n}{xaxis\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Índice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{n}{yaxis\PYZus{}title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Valor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{py}\PY{o}{.}\PY{n}{iplot}\PY{p}{(}\PY{n}{fig}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    Calculando agora as frequencias por ano, dia e mes

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{240}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ano\PYZus{}freq} \PY{o}{=} \PY{n}{collections}\PY{o}{.}\PY{n}{Counter}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ano}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}ano\PYZus{}freq} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{ano\PYZus{}freq}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ano}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{frequencia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}ano\PYZus{}freq}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ano}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{240}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
    ano  frequencia
0  2019       35261
1  2018        6049
2  2017        3205
4  2016        2707
6  2015        1393
8  2014         199
7  2013          48
5  2012          25
3  2011           7
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{241}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{mes\PYZus{}freq} \PY{o}{=} \PY{n}{collections}\PY{o}{.}\PY{n}{Counter}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}mes\PYZus{}freq} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{mes\PYZus{}freq}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{frequencia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}mes\PYZus{}freq}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{241}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
    mes  frequencia
5    12        1770
2    11        1158
4    10        1545
9     9        1535
7     8        1667
1     7        5937
3     6       13589
0     5       14753
8     4        2109
10    3        1288
11    2         770
6     1        2773
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{242}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dia\PYZus{}freq} \PY{o}{=} \PY{n}{collections}\PY{o}{.}\PY{n}{Counter}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}dia\PYZus{}freq} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{dia\PYZus{}freq}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{frequencia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}dia\PYZus{}freq}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{242}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
    dia  frequencia
7    31         992
17   30        2305
8    29        1280
9    28        1289
16   27        1307
25   26        1210
19   25        1120
4    24        1537
6    23        2021
3    22        1271
0    21        1196
29   20        1065
1    19       11231
22   18         933
20   17         909
18   16        1144
13   15         985
14   14         746
12   13         720
15   12         712
28   11         716
30   10         817
5     9         902
27    8         899
21    7        1466
26    6        1240
2     5        1378
23    4        1110
24    3        1390
11    2        1997
10    1        3006
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]

\end{Verbatim}
\end{tcolorbox}

    Quais são os nomes de anúncios?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{243}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{result2} \PY{o}{=} \PY{n}{collections}\PY{o}{.}\PY{n}{Counter}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{result2}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}sorted} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{df\PYZus{}sorted}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sorted\PYZus{}result\PYZus{}2.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n}{df\PYZus{}sorted}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{243}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
                                                   nome  count
1707                  1 Bed Apt in Utopic Williamsburg       1
6032                    2-3 bedroom UWS garden triplex       1
4782                     3 bedroom loft in Williamsburg      1
2628                      A charming Space in Brooklyn       1
5048                 AMAZING TIME SQUARE!!BRICK WALLS!!      1
{\ldots}                                                 {\ldots}    {\ldots}
36011                                  한성 韓城 Han C (2F)      1
25457  ️CENTRALLY LOCATED️- Great for Families + Groups      1
26718                           ｳｨﾘｱﾑｽﾞﾊﾞｰｸﾞのかわいいお部屋です2      1
46442      ﾏﾝﾊｯﾀﾝ､駅から徒歩4分でどこに行くのにも便利な場所!女性の方希望,ｷﾚｲなお部屋｡      1
2829                                                NaN     16

[47905 rows x 2 columns]
\end{Verbatim}
\end{tcolorbox}
        
    Quais são os bairros?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{244}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{bairros\PYZus{}unicos} \PY{o}{=} \PY{n+nb}{sorted}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n}{df\PYZus{}bairros} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bairros}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{bairros\PYZus{}unicos}\PY{p}{\PYZcb{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{df\PYZus{}bairros}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
             Bairros
0           Allerton
1      Arden Heights
2           Arrochar
3            Arverne
4            Astoria
..               {\ldots}
216  Windsor Terrace
217        Woodhaven
218         Woodlawn
219          Woodrow
220         Woodside

[221 rows x 1 columns]
    \end{Verbatim}

    Quais são os tipos de apartamento?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{245}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{collections}\PY{o}{.}\PY{n}{Counter}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{245}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
Counter(\{'Entire home/apt': 25409, 'Private room': 22325, 'Shared room': 1160\})
\end{Verbatim}
\end{tcolorbox}
        
    Quantos apartamentos tem cada host?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{246}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{result} \PY{o}{=} \PY{n}{collections}\PY{o}{.}\PY{n}{Counter}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{result}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{df\PYZus{}sorted} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n}{df\PYZus{}sorted}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sorted\PYZus{}result.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n}{df\PYZus{}sorted}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{246}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
         host\_id  count
30564  219517861    327
21708  107434423    232
8391    30283594    121
26733  137358866    103
25207   12243051     96
{\ldots}          {\ldots}    {\ldots}
15604   23727216      1
15603   89211125      1
15602   19928013      1
15601    1017772      1
37456   68119814      1

[37457 rows x 2 columns]
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{247}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} 219517861}
\PY{n}{filtrado2} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+m+mi}{219517861}\PY{p}{]}
\PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{filtrado2}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{247}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
             id                                               nome    host\_id  \textbackslash{}
38292  30181691      Sonder | 180 Water | Incredible 2BR + Rooftop  219517861
38293  30181945         Sonder | 180 Water | Premier 1BR + Rooftop  219517861
38587  30347708        Sonder | 180 Water | Charming 1BR + Rooftop  219517861
39768  30937590            Sonder | The Nash | Artsy 1BR + Rooftop  219517861
39769  30937591        Sonder | The Nash | Lovely Studio + Rooftop  219517861
{\ldots}         {\ldots}                                                {\ldots}        {\ldots}
47690  35871510  Sonder | 116 John | Vibrant Studio + Fitness Room  219517861
47691  35871511     Sonder | 116 John | Vibrant 1BR + Fitness Room  219517861
47692  35871515         Sonder | 116 John | Stunning 1BR + Rooftop  219517861
47813  35936418          Sonder | 116 John | Polished Studio + Gym  219517861
47820  35937891            Sonder | 116 John | Simple Studio + Gym  219517861

          host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
38292  Sonder (NYC)    Manhattan  Financial District  40.70637  -74.00645
38293  Sonder (NYC)    Manhattan  Financial District  40.70771  -74.00641
38587  Sonder (NYC)    Manhattan  Financial District  40.70743  -74.00443
39768  Sonder (NYC)    Manhattan         Murray Hill  40.74792  -73.97614
39769  Sonder (NYC)    Manhattan         Murray Hill  40.74771  -73.97528
{\ldots}             {\ldots}          {\ldots}                 {\ldots}       {\ldots}        {\ldots}
47690  Sonder (NYC)    Manhattan  Financial District  40.70818  -74.00631
47691  Sonder (NYC)    Manhattan  Financial District  40.70691  -74.00682
47692  Sonder (NYC)    Manhattan  Financial District  40.70772  -74.00673
47813  Sonder (NYC)    Manhattan  Financial District  40.70840  -74.00518
47820  Sonder (NYC)    Manhattan  Financial District  40.70707  -74.00557

             room\_type  price  minimo\_noites  numero\_de\_reviews ultima\_review  \textbackslash{}
38292  Entire home/apt    302             29                  0    2019-05-19
38293  Entire home/apt    229             29                  1    2019-05-29
38587  Entire home/apt    232             29                  1    2019-05-21
39768  Entire home/apt    262              2                  8    2019-06-09
39769  Entire home/apt    255              2                 14    2019-06-10
{\ldots}                {\ldots}    {\ldots}            {\ldots}                {\ldots}           {\ldots}
47690  Entire home/apt    135             29                  0    2019-05-19
47691  Entire home/apt    165             29                  0    2019-05-19
47692  Entire home/apt    165             29                  0    2019-05-19
47813  Entire home/apt    699             29                  0    2019-05-19
47820  Entire home/apt    699             29                  0    2019-05-19

       reviews\_por\_mes  calculado\_host\_listings\_count  disponibilidade\_365  \textbackslash{}
38292             0.72                            327                  309
38293             0.73                            327                  219
38587             0.60                            327                  159
39768             1.86                            327                   91
39769             2.59                            327                   81
{\ldots}                {\ldots}                            {\ldots}                  {\ldots}
47690             0.72                            327                  339
47691             0.72                            327                  342
47692             0.72                            327                  347
47813             0.72                            327                  327
47820             0.72                            327                  341

        ano  mes  dia
38292  2019    5   19
38293  2019    5   29
38587  2019    5   21
39768  2019    6    9
39769  2019    6   10
{\ldots}     {\ldots}  {\ldots}  {\ldots}
47690  2019    5   19
47691  2019    5   19
47692  2019    5   19
47813  2019    5   19
47820  2019    5   19

[327 rows x 19 columns]
\end{Verbatim}
\end{tcolorbox}
        
    Quantos anuncios tem cada host em cada grupo de bairros?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{248}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{anuncios\PYZus{}por\PYZus{}host} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{size}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{num\PYZus{}anuncios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{anuncios\PYZus{}por\PYZus{}host}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{num\PYZus{}anuncios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{248}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
         host\_id bairro\_group  num\_anuncios
34757  219517861    Manhattan           327
29495  107434423    Manhattan           230
19636   30283594    Manhattan           121
12846   12243051    Manhattan            96
14482   16098958    Manhattan            96
{\ldots}          {\ldots}          {\ldots}           {\ldots}
13379   13499885     Brooklyn             1
13378   13497325     Brooklyn             1
13377   13496782     Brooklyn             1
13375   13490977     Brooklyn             1
37571  274321313    Manhattan             1

[37572 rows x 3 columns]
\end{Verbatim}
\end{tcolorbox}
        
    Quantos anuncios tem cada host em cada bairros?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{249}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{anuncios\PYZus{}por\PYZus{}host} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{size}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{num\PYZus{}anuncios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{anuncios\PYZus{}por\PYZus{}host}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{num\PYZus{}anuncios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{249}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
         host\_id              bairro  num\_anuncios
35447  219517861  Financial District           218
9948     7503643          Greenpoint            52
13080   12243051  Financial District            51
30770  120762452         Murray Hill            50
35450  219517861         Murray Hill            50
{\ldots}          {\ldots}                 {\ldots}           {\ldots}
13593   13451102     Upper West Side             1
13591   13440686  Bedford-Stuyvesant             1
13590   13425453        Clinton Hill             1
13589   13425452   Greenwich Village             1
38311  274321313      Hell's Kitchen             1

[38312 rows x 3 columns]
\end{Verbatim}
\end{tcolorbox}
        
    Qual é o número médio ``mínimo de noites'' por tipo de apartamento?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{250}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{minimo\PYZus{}noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{250}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
room\_type
Entire home/apt    8.506907
Private room       5.378096
Shared room        6.475000
Name: minimo\_noites, dtype: float64
\end{Verbatim}
\end{tcolorbox}
        
    Quais são os tipos de apartamentos com alugueis mais caros e os mais
baratos? E em quais bairros estão localizados?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{251}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{media\PYZus{}preco\PYZus{}por\PYZus{}tipo} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}
\PY{n}{tipo\PYZus{}mais\PYZus{}caro} \PY{o}{=} \PY{n}{media\PYZus{}preco\PYZus{}por\PYZus{}tipo}\PY{o}{.}\PY{n}{idxmax}\PY{p}{(}\PY{p}{)}
\PY{n}{preco\PYZus{}mais\PYZus{}caro} \PY{o}{=} \PY{n}{media\PYZus{}preco\PYZus{}por\PYZus{}tipo}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{p}{)}
\PY{n}{tipo\PYZus{}mais\PYZus{}barato} \PY{o}{=} \PY{n}{media\PYZus{}preco\PYZus{}por\PYZus{}tipo}\PY{o}{.}\PY{n}{idxmin}\PY{p}{(}\PY{p}{)}
\PY{n}{preco\PYZus{}mais\PYZus{}barato} \PY{o}{=} \PY{n}{media\PYZus{}preco\PYZus{}por\PYZus{}tipo}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{)}
\PY{n}{bairro\PYZus{}mais\PYZus{}caro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{n}{tipo\PYZus{}mais\PYZus{}caro}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}
\PY{n}{bairro\PYZus{}mais\PYZus{}barato} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{n}{tipo\PYZus{}mais\PYZus{}barato}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{O tipo de apartamento mais caro é }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{tipo\PYZus{}mais\PYZus{}caro}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ com preço médio de \PYZdl{}}\PY{l+s+si}{\PYZob{}}\PY{n}{preco\PYZus{}mais\PYZus{}caro}\PY{l+s+si}{:}\PY{l+s+s2}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{, localizado nos bairros: }\PY{l+s+si}{\PYZob{}}\PY{n}{bairro\PYZus{}mais\PYZus{}caro}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{O tipo de apartamento mais barato é }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{tipo\PYZus{}mais\PYZus{}barato}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ com preço médio de \PYZdl{}}\PY{l+s+si}{\PYZob{}}\PY{n}{preco\PYZus{}mais\PYZus{}barato}\PY{l+s+si}{:}\PY{l+s+s2}{.2f}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{, localizado nos bairros: }\PY{l+s+si}{\PYZob{}}\PY{n}{bairro\PYZus{}mais\PYZus{}barato}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
O tipo de apartamento mais caro é 'Entire home/apt' com preço médio de \$211.79,
localizado nos bairros: ['Midtown' 'Clinton Hill' 'East Harlem' 'Murray Hill'
'Chinatown'
 'Upper West Side' 'West Village' 'Williamsburg' 'Fort Greene'
 'Crown Heights' 'Bedford-Stuyvesant' "Hell's Kitchen" 'East Village'
 'Bushwick' 'South Slope' 'Harlem' 'Prospect-Lefferts Gardens'
 'Greenpoint' 'Kips Bay' 'SoHo' 'Chelsea' 'Upper East Side'
 'Prospect Heights' 'Park Slope' 'Lower East Side' 'Flatbush'
 'Brooklyn Heights' 'Carroll Gardens' 'Gowanus' 'Cobble Hill'
 'Boerum Hill' 'Financial District' 'Ridgewood' 'Middle Village'
 'Ditmars Steinway' 'Flatiron District' 'Greenwich Village' 'Little Italy'
 'East Flatbush' 'Astoria' 'Eastchester' 'Washington Heights'
 'Kingsbridge' 'Forest Hills' 'Nolita' 'Windsor Terrace' 'Woodlawn'
 'Gravesend' 'Gramercy' 'Allerton' 'East New York' 'Sheepshead Bay'
 'Theater District' 'Long Island City' 'Fort Hamilton' 'Bensonhurst'
 'Shore Acres' 'Sunset Park' 'DUMBO' 'Elmhurst' 'Sunnyside' 'Arrochar'
 'Kensington' 'Spuyten Duyvil' 'Columbia St' 'Brighton Beach'
 'Vinegar Hill' 'Longwood' 'Inwood' 'Tribeca' 'Civic Center' 'Rego Park'
 'Concourse' 'Arverne' 'Tottenville' 'NoHo' 'Flatlands' 'Woodside'
 'Morningside Heights' 'Bayside' 'Downtown Brooklyn' 'Fieldston'
 'College Point' 'Flushing' 'Briarwood' 'City Island' 'Bay Ridge'
 'East Elmhurst' 'Port Richmond' 'Red Hook' 'St. George' 'Canarsie'
 'Richmond Hill' 'Queens Village' 'Glendale' 'Cypress Hills'
 'Battery Park City' 'Jackson Heights' 'Maspeth' 'Two Bridges' 'Woodrow'
 'Stuyvesant Town' 'Parkchester' 'Port Morris' 'Roosevelt Island'
 'St. Albans' 'Bronxdale' 'Sea Gate' 'Riverdale' 'Kew Gardens Hills'
 'Ozone Park' 'Jamaica' 'Rockaway Beach' 'Whitestone' 'Clifton'
 'Navy Yard' 'Borough Park' 'Williamsbridge' 'Woodhaven' 'Mott Haven'
 'Brownsville' 'Bay Terrace' 'Concourse Village' 'Clason Point'
 'Stapleton' 'Lighthouse Hill' 'Springfield Gardens' 'Tompkinsville'
 'Howard Beach' 'Jamaica Estates' 'Kew Gardens' 'Fresh Meadows' 'Midwood'
 'West Brighton' 'Mariners Harbor' 'Great Kills' 'Mount Hope'
 'Marble Hill' 'Manhattan Beach' 'Dongan Hills' 'East Morrisania'
 'Neponsit' 'Throgs Neck' 'Todt Hill' 'Silver Lake' 'Randall Manor'
 'Concord' 'Morrisania' 'Bellerose' 'Grymes Hill' 'Dyker Heights'
 'Castleton Corners' 'Far Rockaway' 'Pelham Bay' 'Edgemere' 'Wakefield'
 'Midland Beach' 'Baychester' 'Melrose' 'Norwood' 'Rosedale'
 'Pelham Gardens' 'Bergen Beach' 'Cambria Heights' 'Richmondtown' 'Corona'
 'South Ozone Park' 'Claremont Village' 'Tremont' 'University Heights'
 'Howland Hook' 'Fordham' 'Schuylerville' 'New Dorp Beach' 'Coney Island'
 'Van Nest' 'Highbridge' "Prince's Bay" 'South Beach' 'Bath Beach'
 'Eltingville' 'Oakwood' 'Castle Hill' 'North Riverdale' 'Soundview'
 'Douglaston' 'Huguenot' 'Morris Heights' 'Grant City' 'Emerson Hill'
 'Westerleigh' 'Bay Terrace, Staten Island' 'Westchester Square'
 'Fort Wadsworth' 'Laurelton' 'Unionport' 'Mill Basin' 'Belmont' 'Hollis'
 'New Springville' 'Edenwald' 'Arden Heights' 'New Dorp' 'Morris Park'
 'Mount Eden' 'Graniteville' 'Bayswater' 'Rossville' 'Willowbrook'
 'Belle Harbor' 'Rosebank' 'Hunts Point' 'West Farms' 'Jamaica Hills'
 'New Brighton' 'Little Neck'].

O tipo de apartamento mais barato é 'Shared room' com preço médio de \$70.13,
localizado nos bairros: ['Lower East Side' "Hell's Kitchen" 'East Harlem'
'Harlem'
 'Upper East Side' 'Ozone Park' 'Jamaica' 'Chelsea' 'Upper West Side'
 'SoHo' 'Bedford-Stuyvesant' 'Williamsburg' 'Flushing' 'West Village'
 'Washington Heights' 'Gowanus' 'Astoria' 'Richmond Hill' 'Midtown'
 'Flatbush' 'Bellerose' 'Theater District' 'Battery Park City'
 'Forest Hills' 'Financial District' 'Crown Heights' 'East Village'
 'Kingsbridge' 'Jackson Heights' 'Clinton Hill' 'Fordham' 'Sunset Park'
 'Clason Point' 'Sunnyside' 'Bushwick' 'Long Island City' 'Gramercy'
 'Murray Hill' 'Flatlands' 'Kips Bay' 'Borough Park' 'Eastchester'
 'Sheepshead Bay' 'Roosevelt Island' 'East Flatbush' 'Greenpoint'
 'Pelham Bay' 'Corona' 'East New York' 'Bensonhurst' 'Ditmars Steinway'
 'Gravesend' 'Inwood' 'Little Italy' 'Chinatown' 'Kew Gardens'
 'Parkchester' 'Morningside Heights' 'Fort Hamilton' 'Midwood'
 'Boerum Hill' 'Nolita' 'Fort Greene' 'Prospect-Lefferts Gardens'
 'Park Slope' 'Brighton Beach' 'Vinegar Hill' 'Cypress Hills' 'Canarsie'
 'Coney Island' 'Bay Ridge' 'Rego Park' 'Hollis' 'Schuylerville'
 'East Elmhurst' 'Port Morris' 'Kensington' 'Ridgewood' 'Woodlawn'
 'Belmont' 'Riverdale' 'Concourse Village' 'Wakefield' 'Queens Village'
 'Greenwich Village' 'Red Hook' 'Elmhurst' 'South Slope' 'South Beach'
 'Morris Heights' 'Woodhaven' 'Olinville' 'Norwood' 'Briarwood' 'Maspeth'
 'Clifton' 'South Ozone Park' 'Springfield Gardens' 'Morris Park'
 'Bay Terrace' 'Dyker Heights' 'Fieldston' 'Little Neck' 'Van Nest'
 'University Heights' 'Tremont' 'Morrisania' 'Concord' 'Woodside'
 'Pelham Gardens' 'Longwood' 'Randall Manor' 'Bronxdale' 'Stuyvesant Town'
 'Arverne'].

    \end{Verbatim}

    Quais são os bairros com o maior e menor número de reviews? colocar o
`bairro\_group',

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{252}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{total\PYZus{}reviews\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{numero\PYZus{}de\PYZus{}reviews}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
\PY{n}{bairro\PYZus{}mais\PYZus{}reviews} \PY{o}{=} \PY{n}{total\PYZus{}reviews\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{idxmax}\PY{p}{(}\PY{p}{)}
\PY{n}{max\PYZus{}reviews} \PY{o}{=} \PY{n}{total\PYZus{}reviews\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{p}{)}
\PY{n}{bairro\PYZus{}menos\PYZus{}reviews} \PY{o}{=} \PY{n}{total\PYZus{}reviews\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{idxmin}\PY{p}{(}\PY{p}{)}
\PY{n}{min\PYZus{}reviews} \PY{o}{=} \PY{n}{total\PYZus{}reviews\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{O bairro com o maior número total de reviews é }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{bairro\PYZus{}mais\PYZus{}reviews}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ com }\PY{l+s+si}{\PYZob{}}\PY{n}{max\PYZus{}reviews}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{ reviews.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{O bairro com o menor número total de reviews é }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{bairro\PYZus{}menos\PYZus{}reviews}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ com }\PY{l+s+si}{\PYZob{}}\PY{n}{min\PYZus{}reviews}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{ reviews.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
O bairro com o maior número total de reviews é 'Bedford-Stuyvesant' com 110352
reviews.
O bairro com o menor número total de reviews é 'Fort Wadsworth' com 0 reviews.
    \end{Verbatim}

    Quais são os anuncios com o maior e menor número de reviews? Em que
bairro estão?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{253}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{maior\PYZus{}reviews} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{numero\PYZus{}de\PYZus{}reviews}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{idxmax}\PY{p}{(}\PY{p}{)}\PY{p}{]}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{Anuncio com o maior número de reviews:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{maior\PYZus{}reviews}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{numero\PYZus{}de\PYZus{}reviews}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
\PY{n}{menor\PYZus{}reviews} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{numero\PYZus{}de\PYZus{}reviews}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{idxmin}\PY{p}{(}\PY{p}{)}\PY{p}{]}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{Anuncio com o menor número de reviews:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{menor\PYZus{}reviews}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{numero\PYZus{}de\PYZus{}reviews}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]

Anuncio com o maior número de reviews:
nome                 Room near JFK Queen Bed
bairro                               Jamaica
bairro\_group                          Queens
numero\_de\_reviews                        629
Name: 11758, dtype: object

Anuncio com o menor número de reviews:
nome                 THE VILLAGE OF HARLEM{\ldots}NEW YORK !
bairro                                            Harlem
bairro\_group                                   Manhattan
numero\_de\_reviews                                      0
Name: 1, dtype: object
    \end{Verbatim}

    Quais são os anuncios (nome) por bairro? `bairro\_group'

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{254}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{anuncios\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{nunique}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{num\PYZus{}tipos\PYZus{}anuncios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{anuncios\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{anuncios\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{num\PYZus{}tipos\PYZus{}anuncios}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{anuncios\PYZus{}por\PYZus{}bairro}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                 bairro  num\_tipos\_anuncios
214        Williamsburg                3830
13   Bedford-Stuyvesant                3674
94               Harlem                2634
28             Bushwick                2434
202     Upper West Side                1948
..                  {\ldots}                 {\ldots}
82       Fort Wadsworth                   1
215         Willowbrook                   1
165        Richmondtown                   1
172           Rossville                   1
141            New Dorp                   1

[221 rows x 2 columns]
    \end{Verbatim}

    Qual é o preço máximo e mínimo?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{255}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{preco\PYZus{}maximo} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{p}{)}
\PY{n}{preco\PYZus{}minimo} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Preço máximo:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{preco\PYZus{}maximo}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Preço mínimo:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{preco\PYZus{}minimo}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Preço máximo: 10000
Preço mínimo: 0
    \end{Verbatim}

    Qual o preço médio do aluguel (por noite) por bairro?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{256}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{p}{)}
\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
             bairro       price
82   Fort Wadsworth  800.000000
219         Woodrow  700.000000
197         Tribeca  490.638418
174        Sea Gate  487.857143
167       Riverdale  442.090909
..              {\ldots}         {\ldots}
141        New Dorp   57.000000
179       Soundview   53.466667
196         Tremont   51.545455
102     Hunts Point   50.500000
27      Bull's Head   47.333333

[221 rows x 2 columns]
    \end{Verbatim}

    Quanto ganha por noite cada host em média? E por ano?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{257}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}ano} \PY{o}{=} \PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{*} \PY{l+m+mi}{365}

\PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}ano} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ganho\PYZus{}medio\PYZus{}por\PYZus{}ano}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}ano}\PY{p}{\PYZcb{}}\PY{p}{)}

\PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite} \PY{o}{=} \PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}ano} \PY{o}{=} \PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}ano}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ganho\PYZus{}medio\PYZus{}por\PYZus{}ano}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Ganho médio por noite para cada host:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}noite}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{Ganho médio por ano para cada host:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{ganho\PYZus{}medio\PYZus{}por\PYZus{}ano}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Ganho médio por noite para cada host:
        host\_id  ganho\_medio\_por\_noite
7693    5143901                10000.0
26778  72390391                10000.0
16313  20582832                10000.0
6315    3906464                 9999.0
2516    1235070                 9999.0
{\ldots}         {\ldots}                    {\ldots}
1609     647528                   10.0
23429  47336995                   10.0
25797  62685070                   10.0
11495  10132166                    0.0
13414  13709292                    0.0

[37457 rows x 2 columns]

Ganho médio por ano para cada host:
        host\_id  ganho\_medio\_por\_ano
7693    5143901            3650000.0
26778  72390391            3650000.0
16313  20582832            3650000.0
6315    3906464            3649635.0
2516    1235070            3649635.0
{\ldots}         {\ldots}                  {\ldots}
1609     647528               3650.0
23429  47336995               3650.0
25797  62685070               3650.0
11495  10132166                  0.0
13414  13709292                  0.0

[37457 rows x 2 columns]
    \end{Verbatim}

    Qual anuncio tem a disponibilidade mais alta e qual a mais baixa?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{258}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{indice\PYZus{}disponibilidade\PYZus{}maxima} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{idxmax}\PY{p}{(}\PY{p}{)}
\PY{n}{indice\PYZus{}disponibilidade\PYZus{}minima} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{idxmin}\PY{p}{(}\PY{p}{)}

\PY{n}{anuncio\PYZus{}disponibilidade\PYZus{}maxima} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{indice\PYZus{}disponibilidade\PYZus{}maxima}\PY{p}{]}
\PY{n}{anuncio\PYZus{}disponibilidade\PYZus{}minima} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{indice\PYZus{}disponibilidade\PYZus{}minima}\PY{p}{]}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Anúncio com a disponibilidade mais alta:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{anuncio\PYZus{}disponibilidade\PYZus{}maxima}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{Anúncio com a disponibilidade mais baixa:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{anuncio\PYZus{}disponibilidade\PYZus{}minima}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Anúncio com a disponibilidade mais alta:
id                                                              3647
nome                             THE VILLAGE OF HARLEM{\ldots}NEW YORK !
host\_id                                                         4632
host\_name                                                  Elisabeth
bairro\_group                                               Manhattan
bairro                                                        Harlem
latitude                                                    40.80902
longitude                                                   -73.9419
room\_type                                               Private room
price                                                            150
minimo\_noites                                                      3
numero\_de\_reviews                                                  0
ultima\_review                                    2019-05-19 00:00:00
reviews\_por\_mes                                                 0.72
calculado\_host\_listings\_count                                      1
disponibilidade\_365                                              365
ano                                                             2019
mes                                                                5
dia                                                               19
Name: 1, dtype: object

Anúncio com a disponibilidade mais baixa:
id
5022
nome                             Entire Apt: Spacious Studio/Loft by central
park
host\_id
7192
host\_name
Laura
bairro\_group
Manhattan
bairro                                                                East
Harlem
latitude
40.79851
longitude
-73.94399
room\_type                                                         Entire
home/apt
price
80
minimo\_noites
10
numero\_de\_reviews
9
ultima\_review                                                 2018-11-19
00:00:00
reviews\_por\_mes
0.1
calculado\_host\_listings\_count
1
disponibilidade\_365
0
ano
2018
mes
11
dia
19
Name: 3, dtype: object
    \end{Verbatim}

    Qual a disponibilidade média por bairro?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{259}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}
\PY{n}{df\PYZus{}disponibilidade\PYZus{}media} \PY{o}{=} \PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{p}{)}
\PY{n}{df\PYZus{}disponibilidade\PYZus{}media}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{n}{columns}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}media}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,} \PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{df\PYZus{}disponibilidade\PYZus{}media} \PY{o}{=} \PY{n}{df\PYZus{}disponibilidade\PYZus{}media}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}media}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{df\PYZus{}disponibilidade\PYZus{}media}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                         bairro  disponibilidade\_media
82               Fort Wadsworth             365.000000
42                   Co-op City             364.000000
215                 Willowbrook             351.000000
65                  Eastchester             333.461538
165                Richmondtown             300.000000
..                          {\ldots}                    {\ldots}
130         Morningside Heights              43.054913
57            Downtown Brooklyn              39.481928
9    Bay Terrace, Staten Island               0.000000
141                    New Dorp               0.000000
219                     Woodrow               0.000000

[221 rows x 2 columns]
    \end{Verbatim}

    Qual o preço médio do aluguel por grupo de bairro?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{260}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{p}{)}
\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n+nb}{round}\PY{p}{(}\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
    bairro\_group  price
2      Manhattan  197.0
1       Brooklyn  124.0
4  Staten Island  115.0
3         Queens  100.0
0          Bronx   87.0
    \end{Verbatim}

    Qual a disponibilidade média (dada por dia) por grupo de bairro?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{261}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}bairro\PYZus{}group} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}media}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}bairro\PYZus{}group\PYZus{}ordenado} \PY{o}{=} \PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}bairro\PYZus{}group}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}media}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Disponibilidade média por bairro\PYZus{}group:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n+nb}{round}\PY{p}{(}\PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}bairro\PYZus{}group\PYZus{}ordenado}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Disponibilidade média por bairro\_group:
    bairro\_group  disponibilidade\_media
4  Staten Island                  200.0
0          Bronx                  166.0
3         Queens                  144.0
2      Manhattan                  112.0
1       Brooklyn                  100.0
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{262}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{merged\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}bairro\PYZus{}group}\PY{p}{,} \PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{merged\PYZus{}df}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
    bairro\_group  disponibilidade\_media       price
0          Bronx             165.758937   87.496792
1       Brooklyn             100.219122  124.381983
2      Manhattan             111.979410  196.875814
3         Queens             144.451818   99.517649
4  Staten Island             199.678284  114.812332
    \end{Verbatim}

    Qual é a média de preço para cada tipo de apartamento?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{263}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{preco\PYZus{}media\PYZus{}por\PYZus{}tipo} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{media\PYZus{}preco}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Preço médio por tipo de apartamento:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n+nb}{round}\PY{p}{(}\PY{n}{preco\PYZus{}media\PYZus{}por\PYZus{}tipo}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Preço médio por tipo de apartamento:
         room\_type  media\_preco
0  Entire home/apt        212.0
1     Private room         90.0
2      Shared room         70.0
    \end{Verbatim}

    Qual a disponibilidade média (dada por dia) por tipo de apartamento?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{264}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}tipo} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{media\PYZus{}disponibilidade}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Disponibilidade média por tipo de apartamento:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n+nb}{round}\PY{p}{(}\PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}tipo}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Disponibilidade média por tipo de apartamento:
         room\_type  media\_disponibilidade
0  Entire home/apt                  112.0
1     Private room                  111.0
2      Shared room                  162.0
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{265}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{merged\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{preco\PYZus{}media\PYZus{}por\PYZus{}tipo}\PY{p}{,} \PY{n}{disponibilidade\PYZus{}media\PYZus{}por\PYZus{}tipo}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{merged\PYZus{}df}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
         room\_type  media\_preco  media\_disponibilidade
0  Entire home/apt   211.794246             111.920304
1     Private room    89.778320             111.192564
2      Shared room    70.127586             162.000862
    \end{Verbatim}

    Um apartamento com alta disponibilidade (por dia) rende mais que um
apartamento com baixa disponibilidade? Vamos considerar a média como um
ponto de referencia.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{266}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Calcular a média da disponibilidade}
\PY{n}{media\PYZus{}disponibilidade} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Dividir os dados em grupos com alta e baixa disponibilidade}
\PY{n}{alta\PYZus{}disponibilidade} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{media\PYZus{}disponibilidade}\PY{p}{]}
\PY{n}{baixa\PYZus{}disponibilidade} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}} \PY{n}{media\PYZus{}disponibilidade}\PY{p}{]}

\PY{c+c1}{\PYZsh{} Calcular a média do preço por noite para cada grupo}
\PY{n}{media\PYZus{}preco\PYZus{}alta\PYZus{}disponibilidade} \PY{o}{=} \PY{n}{alta\PYZus{}disponibilidade}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}
\PY{n}{media\PYZus{}preco\PYZus{}baixa\PYZus{}disponibilidade} \PY{o}{=} \PY{n}{baixa\PYZus{}disponibilidade}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Comparar as médias de preço}
\PY{k}{if} \PY{n}{media\PYZus{}preco\PYZus{}alta\PYZus{}disponibilidade} \PY{o}{\PYZgt{}} \PY{n}{media\PYZus{}preco\PYZus{}baixa\PYZus{}disponibilidade}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Apartamentos com alta disponibilidade rendem mais.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{k}{elif} \PY{n}{media\PYZus{}preco\PYZus{}alta\PYZus{}disponibilidade} \PY{o}{\PYZlt{}} \PY{n}{media\PYZus{}preco\PYZus{}baixa\PYZus{}disponibilidade}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Apartamentos com baixa disponibilidade rendem mais.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{k}{else}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Não há diferença significativa no rendimento entre apartamentos com alta e baixa disponibilidade.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Apartamentos com alta disponibilidade rendem mais.
    \end{Verbatim}

    Qual a média de dias de disponibilidade?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{267}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{media\PYZus{}disponibilidade} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{A média de dias é:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{media\PYZus{}disponibilidade}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
A média de dias é: 112.77616885507425
    \end{Verbatim}

    E para cada anuncio?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{268}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{media\PYZus{}disponibilidade\PYZus{}por\PYZus{}anuncio} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{p}{)}
\PY{n}{media\PYZus{}disponibilidade\PYZus{}por\PYZus{}anuncio} \PY{o}{=} \PY{n}{media\PYZus{}disponibilidade\PYZus{}por\PYZus{}anuncio}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{media\PYZus{}disponibilidade\PYZus{}por\PYZus{}anuncio}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                                                    nome  disponibilidade\_365
19888                   Futon to crash on New Year in NY                365.0
9994                                Bushwick Artist Loft                365.0
30457    Nice \& quiet,clean \& neat, all including hostel                365.0
15450                                        Cozy Stay!!                365.0
30401  Newly renovated house with a rooftop near Down{\ldots}                365.0
{\ldots}                                                  {\ldots}                  {\ldots}
25593                           Lincoln Center Apartment                  0.0
25592                 Lincoln Center 1 Bedroom Apartment                  0.0
25589                                           Lily Pad                  0.0
25583                     Like living in an art gallery.                  0.0
0                      1 Bed Apt in Utopic Williamsburg                   0.0

[47904 rows x 2 columns]
    \end{Verbatim}

    Selecionando os 10 bairros mais caros

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{269}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{p}{)}
\PY{n}{top\PYZus{}10\PYZus{}bairros\PYZus{}caros} \PY{o}{=} \PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}10\PYZus{}bairros\PYZus{}caros}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                bairro       price
82      Fort Wadsworth  800.000000
219            Woodrow  700.000000
197            Tribeca  490.638418
174           Sea Gate  487.857143
167          Riverdale  442.090909
157       Prince's Bay  409.500000
6    Battery Park City  367.557143
75   Flatiron District  341.925000
161      Randall Manor  336.000000
144               NoHo  295.717949
    \end{Verbatim}

    Selecionando os 10 anuncios mais caros

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{270}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{p}{)}
\PY{n}{top\PYZus{}10\PYZus{}bairros\PYZus{}caros} \PY{o}{=} \PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{top\PYZus{}10\PYZus{}bairros\PYZus{}caros}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                                                    nome    price
1107                                 1-BR Lincoln Center  10000.0
19866                Furnished room in Astoria apartment  10000.0
26756    Luxury 1 bedroom apt. -stunning Manhattan views  10000.0
40315                                 Spanish Harlem Apt   9999.0
35501                Quiet, Clean, Lit @ LES \& Chinatown   9999.0
2213   2br - The Heart of NYC: Manhattans Lower East {\ldots}   9999.0
7017   Beautiful/Spacious 1 bed luxury flat-TriBeCa/Soho   8500.0
19383                                      Film Location   8000.0
18040          East 72nd Townhouse by (Hidden by Airbnb)   7703.0
20108                               Gem of east Flatbush   7500.0
    \end{Verbatim}

    Selecionando os 10 anuncios (atributo nome) mais caros por group bairro

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{271}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{top10\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{x}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
\PY{n}{top10\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{top10\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{top10\PYZus{}nomes\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{top10\PYZus{}por\PYZus{}bairro}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{top10\PYZus{}nomes\PYZus{}por\PYZus{}bairro}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                                                   nome    bairro  price
0     Modern/Spacious 4BR +Tent Perfect for LARGE gr{\ldots}  Allerton    450
1       Spacious 2 level home for Groups sleeps upto 12  Allerton    250
2     ♥♥♥ Entire House with Backyard \& Superfast WiF{\ldots}  Allerton    142
3     *NYC Flat Cold Cozy Private Room w/ Blazin' WiFi*  Allerton    142
4     Beautiful NYC Private Room/Bath, Late Check-In OK  Allerton    142
{\ldots}                                                 {\ldots}       {\ldots}    {\ldots}
1927    Family Apartment.  Close to city. 3 bed, 2 Bath  Woodside    289
1928  Townhouse apt. Close to city. 3 bedrooms \& 2 bath  Woodside    275
1929  Modern 3 Bedroom 2 BATH! 18 min to Times Sq+More!  Woodside    275
1930             Brand New Fully Remodeled Modern House  Woodside    255
1931                                      Living In Art  Woodside    250

[1932 rows x 3 columns]
    \end{Verbatim}

    Selecionando os 10 anuncios (nome) mais caros por group bairro

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{272}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{top10\PYZus{}por\PYZus{}grupo\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{x}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
\PY{n}{top10\PYZus{}por\PYZus{}grupo\PYZus{}bairro} \PY{o}{=} \PY{n}{top10\PYZus{}por\PYZus{}grupo\PYZus{}bairro}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\PY{n}{top10\PYZus{}nomes\PYZus{}por\PYZus{}grupo\PYZus{}bairro} \PY{o}{=} \PY{n}{top10\PYZus{}por\PYZus{}grupo\PYZus{}bairro}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{top10\PYZus{}nomes\PYZus{}por\PYZus{}grupo\PYZus{}bairro}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                                                 nome   bairro\_group  price
0                             "The luxury of Comfort"          Bronx   2500
1                              VJ'S 5 HOUR YACHT TOUR          Bronx   1000
2          New York's Hidden Secret for luxury living          Bronx    800
3                     1 Room in a 2 Bedroom Available          Bronx    680
4                                SedaOn2 Dance Studio          Bronx    670
5                                  Luxury and comfort          Bronx    600
6            ROMANTIC SUNSET YACHT CRUISE \& FIREWORKS          Bronx    600
7                         Downtown style in the Bronx          Bronx    500
8     Quiet, Secure, Clean and very Private Apartment          Bronx    500
9   Vie's NY Unique crashpad apts sleep 14, metro*{\ldots}          Bronx    475
10    Luxury 1 bedroom apt. -stunning Manhattan views       Brooklyn  10000
11                                      Film Location       Brooklyn   8000
12                               Gem of east Flatbush       Brooklyn   7500
13                   SUPER BOWL Brooklyn Duplex Apt!!       Brooklyn   6500
14                   NearWilliamsburg bridge 11211 BK       Brooklyn   5000
15                                           Fulton 2       Brooklyn   5000
16                                         Broadway 1       Brooklyn   5000
17                               Photography Location       Brooklyn   4500
18                     Northside Williamsburg Stunner       Brooklyn   4500
19   Beautiful private Brooklyn room with kitchenette       Brooklyn   4200
20                                1-BR Lincoln Center      Manhattan  10000
21                                 Spanish Harlem Apt      Manhattan   9999
22                Quiet, Clean, Lit @ LES \& Chinatown      Manhattan   9999
23  2br - The Heart of NYC: Manhattans Lower East {\ldots}      Manhattan   9999
24  Beautiful/Spacious 1 bed luxury flat-TriBeCa/Soho      Manhattan   8500
25          East 72nd Townhouse by (Hidden by Airbnb)      Manhattan   7703
26                70' Luxury MotorYacht on the Hudson      Manhattan   7500
27                   3000 sq ft daylight photo studio      Manhattan   6800
28               Apartment New York \textbackslash{}nHell’s Kitchens      Manhattan   6500
29       Luxury TriBeCa Apartment at an amazing price      Manhattan   6500
30                Furnished room in Astoria apartment         Queens  10000
31                      Majestic Mansion LifeStyle :)         Queens   2600
32                       Gorgeous 2 Bedroom apartment         Queens   2350
33                 Room with sofa bed or air mattress         Queens   2000
34                                   wait until later         Queens   2000
35             Mins away to Manhattan Suite Residence         Queens   1800
36   Magnificent Lakeview Home on Kissena Park in NYC         Queens   1500
37         Oceanfront vacation home on Rockaway Beach         Queens   1500
38  2nd floor of 2-family house available for Dece{\ldots}         Queens   1500
39                            Artist apartment in LIC         Queens   1250
40                            Victorian Film location  Staten Island   5000
41  Central Hall Colonial with Free Parking Bus EX{\ldots}  Staten Island   1250
42        Victorian with Stunning Views of NYC Harbor  Staten Island   1000
43    Beach House Retreat. 15 minutes from Manhattan.  Staten Island    800
44                      Spacious center hall colonial  Staten Island    700
45        Wedding guests accommodations, 3-7 bedrooms  Staten Island    625
46  Staten Island Resort minutes from ferry! Amazi{\ldots}  Staten Island    450
47                 large house with inground pool/spa  Staten Island    429
48                         Staten Island NYC Marathon  Staten Island    300
49   FairPlay BNB for alternative life style renters!  Staten Island    300
    \end{Verbatim}

    Quais atributos tem dependências com outros?

Algumas possibilidades:

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\item
  price e room\_type
\item
  price e minimo\_noites
\item
  price e disponibilidade\_365
\item
  price e bairro
\item
  price e bairro\_group
\item
  numero\_de\_reviews e reviews\_por\_mes
\end{enumerate}

Calcular: covariância, correlação e determinação.

CORRELAÇÃO

O valor 1.0 indica alta correlação e ele aparece na diagonal pois é onde
os atributos cruzam com eles mesmos. Na correlação, a variabilidade de
uma variável pode ser explicada pela variação de outra variável. Neste
case, podemos concluir que a correlação entre os atributos selecionados
são baixas, isto é, há pouca relação entre eles.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{273}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{subset} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{minimo\PYZus{}noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
\PY{n}{scaler} \PY{o}{=} \PY{n}{MinMaxScaler}\PY{p}{(}\PY{p}{)}
\PY{n}{normalized\PYZus{}data} \PY{o}{=} \PY{n}{scaler}\PY{o}{.}\PY{n}{fit\PYZus{}transform}\PY{p}{(}\PY{n}{subset}\PY{p}{)}
\PY{n}{normalized\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{normalized\PYZus{}data}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{n}{subset}\PY{o}{.}\PY{n}{columns}\PY{p}{)}
\PY{n}{correlacao} \PY{o}{=} \PY{n}{normalized\PYZus{}df}\PY{o}{.}\PY{n}{corr}\PY{p}{(}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{correlacao}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                        price  minimo\_noites  disponibilidade\_365
price                1.000000       0.042799             0.081833
minimo\_noites        0.042799       1.000000             0.144320
disponibilidade\_365  0.081833       0.144320             1.000000
    \end{Verbatim}

    COVARIÂNCIA

Descobrimos com a covariância se existe alguma relação entre as
variáveis.

Se o resultado for maior que zero então significa que existe uma
dependência entre os atributos. Neste caso, quanto maior a variável1
maior também a variável2.

Se o resultado for menor que zero, também há dependência. Daí indica que
quanto menor a variável 1, menor a variável 2.

Se o resultado for igual a zero, então as variáveis são independentes.

Em nosso case a covariância é positiva, indicando que quanto maior a
variável1 maior também a variável2.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{274}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{covariancia} \PY{o}{=} \PY{n}{normalized\PYZus{}df}\PY{o}{.}\PY{n}{cov}\PY{p}{(}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{covariancia}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                        price  minimo\_noites  disponibilidade\_365
price                0.000577       0.000017             0.000709
minimo\_noites        0.000017       0.000270             0.000855
disponibilidade\_365  0.000709       0.000855             0.130032
    \end{Verbatim}

    COEFICIENTE DE DETERMINAÇÃO

Se o resultado for \textasciitilde1, mais a primeira variável explica a
segunda

Se o resultado for \textasciitilde0, menos a primeira variável
(atributo) explica a segunda, isto é, uma porcentagem da segunda
variável pode ser explicada pela primeira.

Os valores obtidos para este dataset são mais próximos de zero do que de
um, portanto, um atributo não explica muito bem os outros atributos.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{275}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{determinacao} \PY{o}{=} \PY{n}{correlacao}\PY{o}{.}\PY{n}{pow}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{determinacao}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                        price  minimo\_noites  disponibilidade\_365
price                1.000000       0.001832             0.006697
minimo\_noites        0.001832       1.000000             0.020828
disponibilidade\_365  0.006697       0.020828             1.000000
    \end{Verbatim}

    \begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{1}
\item
  price e minimo\_noites
\item
  price e disponibilidade\_365
\item
  price e room\_type
\item
  price e bairro
\item
  price e bairro\_group
\item
  numero\_de\_reviews e reviews\_por\_mes
\end{enumerate}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{276}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Plotar o gráfico}
\PY{n}{fig} \PY{o}{=} \PY{n}{px}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{dados}\PY{p}{,} \PY{n}{x}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{minimo\PYZus{}noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                 \PY{n}{labels}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Preço}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{minimo\PYZus{}noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mínimo de Noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Disponibilidade 365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,}
                 \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Exibir o gráfico}
\PY{n}{fig}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}

\PY{c+c1}{\PYZsh{} X: preço }
\PY{c+c1}{\PYZsh{} Y: número mínimo de noites}
\PY{c+c1}{\PYZsh{} O tamanho dos pontos representa a disponibilidade\PYZus{}365}
\PY{c+c1}{\PYZsh{} A cor dos pontos representa o room\PYZus{}type}
\end{Verbatim}
\end{tcolorbox}

    
    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{277}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Plotar o gráfico}
\PY{n}{fig} \PY{o}{=} \PY{n}{px}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{dados}\PY{p}{,} \PY{n}{x}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{minimo\PYZus{}noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                 \PY{n}{labels}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Preço}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{minimo\PYZus{}noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mínimo de Noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Disponibilidade 365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,}
                 \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Exibir o gráfico}
\PY{n}{fig}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}

\PY{c+c1}{\PYZsh{} X: preço }
\PY{c+c1}{\PYZsh{} Y: número mínimo de noites}
\PY{c+c1}{\PYZsh{} O tamanho dos pontos representa a disponibilidade\PYZus{}365}
\PY{c+c1}{\PYZsh{} A cor dos pontos representa o grupo de bairros}
\end{Verbatim}
\end{tcolorbox}

    
    
    Existe algum padrão no texto do nome do local para lugares de mais alto
valor? Podemos usar processamento de linguagem natural pra isso.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{278}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Baixar as stopwords (se necessário)}
\PY{n}{nltk}\PY{o}{.}\PY{n}{download}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stopwords}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{nltk}\PY{o}{.}\PY{n}{download}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{punkt}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
[nltk\_data] Downloading package stopwords to
[nltk\_data]     C:\textbackslash{}Users\textbackslash{}elain\textbackslash{}AppData\textbackslash{}Roaming\textbackslash{}nltk\_data{\ldots}
[nltk\_data]   Package stopwords is already up-to-date!
[nltk\_data] Downloading package punkt to
[nltk\_data]     C:\textbackslash{}Users\textbackslash{}elain\textbackslash{}AppData\textbackslash{}Roaming\textbackslash{}nltk\_data{\ldots}
[nltk\_data]   Package punkt is already up-to-date!
    \end{Verbatim}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{278}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
True
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{279}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Calcular o preço médio por bairro}
\PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro} \PY{o}{=} \PY{n}{dados}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Ordenar os bairros com base no preço médio em ordem decrescente e selecionar os 10 primeiros}
\PY{n}{top\PYZus{}10\PYZus{}bairros\PYZus{}caros} \PY{o}{=} \PY{n}{preco\PYZus{}medio\PYZus{}por\PYZus{}bairro}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ascending}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Combinar o DataFrame original com os 10 bairros mais caros}
\PY{n}{dados\PYZus{}top\PYZus{}10\PYZus{}bairros\PYZus{}caros} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{dados}\PY{p}{,} \PY{n}{top\PYZus{}10\PYZus{}bairros\PYZus{}caros}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{dados\PYZus{}top\PYZus{}10\PYZus{}bairros\PYZus{}caros}

\PY{c+c1}{\PYZsh{} Selecionar os nomes dos locais (bairros)}
\PY{n}{nomes\PYZus{}locais} \PY{o}{=} \PY{n}{dados\PYZus{}top\PYZus{}10\PYZus{}bairros\PYZus{}caros}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}
\PY{n}{nomes\PYZus{}locais}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{279}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
['NOHO/EAST VILLAGE, PRIVATE 1/2 BATH',
 '1 Bedroom in prime Flatiron',
 "Charming 1br in of NYC's best Neighborhood!",
 'Luxury Loft Noho New York City',
 'Sunlit Noho Loft',
 '1-bedroom APT SoHo / NoLITa',
 'Large, Private 1BR in Noho/Nolita/Soho',
 'HUGE 2bdrm LOFT in NOHO/East Vill!',
 'Noho East Vill Lux Bldg w/Gym,Pool ',
 'Large Stylish 1.5 BR Noho/Nolita',
 'Prime E. Village at St. Marks Place',
 'Charming Soho One Bedroom + Loft',
 'Modern Studio Loft in Downtown NYC',
 'Full Floor Loft Style Apt/Noho/Bond',
 'Beautiful, SEXY apartment',
 'Beautiful 1205 ft classic NoHo Loft',
 'Entire 1 Bedroom apartment',
 'Modern Apartment in NOHO / SOHO',
 'NOHO ART LOFT ON LAFAYETTE. BEST LOCATION IN NYC',
 'Cozy Bowery Studio (6, BDFM trains)',
 'Loft on the Bowery w/roofdeck',
 'Mid Nolita Soho Lit. Italy Village',
 'NoHo 2 Bedroom Loft',
 'Noho Broadway 2 Bedroom Loft',
 '1 brd apartment for Easter week in NOHO',
 'Cozy Studio in the Heart of Soho',
 'Huge 2 Bed Loft Apt in Chic Downtown',
 'Private room. Full size bed. 3rd floor. Cooper Sq',
 'Quiet and cozy apartment in Greenwich Village',
 'Bond Street 2 bedroom 2 bath great Noho location',
 'Prime SOHO Luxury penthouse Loft',
 'Stylish Apt in the Heart of Greenwich Village',
 'Quintessential loft location on Bond Street.',
 'Sun Filled 18ft Ceiling Duplex Noho/East Village',
 'Tasteful NOHO 1 bedroom',
 'Classic Manhattan Loft Apartment',
 'ART LOFT/HOME:  DINNERS, GATHERINGS, PHOTO',
 'Charming and Bright 1 bdr apartment in Noho',
 'Artsy Bowery Loft',
 'ALL YOURS FULL APARTMENT\textbackslash{}n2 BDM 2 BTH East Village!',
 'Large Alcove Studio in Prime Noho Building',
 'Separate 2 Bedroom Apartment located inside Loft.',
 'Bright Designer NoHo/Greenwich Village Loft',
 'Soho/Nolita historic and central downtown location',
 'Artist Loft.Good Energy.Big Space With Fire Place!',
 'NEW Luxury 1BR Oasis - Most Desirable NYC Location',
 'SoHo LOFT \#2  Broadway Av. - Amazing Location!',
 'Upscale living on Lafayette St. NoHO',
 'Bright \& Quiet Minutes from Washington Square Park',
 'Perfect Sunny 1BR in the Treetops',
 'Historic New York Home',
 'Large 2 bedroom downtown Loft Apartment',
 'New York City  Apartment',
 'Unique Penthouse',
 'Mesmerized Penthouse',
 'Artist Penthouse',
 'Your New York Penthouse',
 'Elite Penthouse',
 '“One of a kind” Penthouse \textbackslash{}n獨一無二的紐約閣樓',
 'Home on Houston - 2 Rooms near SoHo/NoHo/LES',
 'Beautiful Elite Penthouse',
 'Manhattan Penthouse',
 'Beautiful home in the heart of Manhattan.',
 'Original NoHo Loft full of Charm \& Character',
 'Brand new luxurious apartment in SoHo!',
 'Mesmerized Penthouse',
 'Entire Loft Apartment in Soho/NoHo/Nolita',
 'The Industrial LOFT \#1 NoHo. - Great Location!',
 'The Industrial LOFT \#2 NoHo. - Great Location!',
 'Urban Design Sanctuary',
 'Downtown 2500 Sq Ft  Loft.',
 'Modern luxury apartment in the heart of Noho',
 'Beautiful - Art Filled - Sun Filled - Luxurious',
 'Cozy NoHo Studio Apartment',
 'Perfect 1 Bedroom in Nolita',
 'Dapper East Village 1BR w/ Gym, W/D, Doorman, near Subway, by Blueground',
 'Prime Modern 2 BR East Village Apt nearby Subway',
 'Get Inspired in Soho | 1 Bedroom',
 'Stylish Large Gramercy Loft!',
 '21 day Chelsea Apartment rental',
 "Flatiron-Designer's loft",
 'Come stay in super comfy and cozy!',
 'Very Large Loft in Chelsea for  Your Stay!!',
 'Studio in FlatIron, NYC !! ',
 'Best Location btwn Un Sq/ Chelsea',
 'Newly Renovated West Village Privat',
 'Luxury 3 Bd 2Bth w/600 sqft deck',
 '4BD, 2 Bath Apt Flatiron on 6th Ave',
 'Flat Iron 2BD Beautiful Apt ',
 '1 Bedroom Apartment in Gramcery!',
 'Elegant Gramercy Park Studio',
 'NY Duplex Apartment in Flatiron',
 'Flatiron studio next to Madison Pk',
 'Cozy | Spacious | Great Location',
 'Huge, central \& artsy Park Ave apt!',
 'Huge Private Room in the BEST location',
 'Loft Space for Events, Meetings \& Shoots',
 'Flatiron Studio Loft, Elevator Bldg',
 'Flatiron 1 Bedroom',
 'Chelsea Apt Great Location',
 'Excellent Location Gramercy Studio',
 'NEWLY RENOVATED 1BDR PRIME LOCATION',
 'Luxury Apartment on Park ave',
 'Sleek Loft, Premium Location',
 'Gramercy Apartment',
 'True 1 bedroom apt in Gramercy',
 'Lovely 3 Bedroom, 2 Bath Flatiron Area Loft',
 'Classic Loft in Gramercy/Flatiron - Amazing Value',
 'Madison Square Park - Midtown East LUX Sleeps 6',
 'Beautiful Flatiron 3 Bedroom, 2 Bath Loft',
 'Fabulously Located Comfortable 3 Bedroom Loft',
 '1 bedroom PRIVATE backyard in heart of Flatiron',
 'Huge Flatiron Designer Studio',
 'Spacious artsy apartment near Gramercy/Flatiron',
 'Prime Gramercy Apartment w Balcony',
 'XL Studio Prime location\textasciitilde{}newly designed\textasciitilde{}best value',
 'Your home in Flatiron NYC',
 '1400 sq ft modern full floor loft',
 'Beautiful 1 bedroom in the heart of Manhattan!',
 'Flatiron / Gramercy 2 Bed Studio',
 'Private Room in Central Manhattan',
 'Studio Apartment in a Doorman Building',
 'Unique Prime Location NYC  Sleeps 6',
 'Jul 16 - Aug 4 16 1-bed close to Madison Sq. Park',
 'Massive 1200ft² Luxury Loft in Heart of Flatiron',
 '2BR PH Loft and Executive Office Central Manhattan',
 'Fabulous flat iron 2 bedroom 2 bathroom',
 'Gorgeous loft by the Flatiron building',
 'Large, Bright, Open 1-BR Oasis in Gramercy Park',
 'Newly renovated 1br in the heart of NY',
 'Freehand New York- Queen Room',
 'Bright room located in the middle of Manhattan!',
 'Spacious Apartment in the heart of Manhattan!',
 'Cool, comfortable: RIGHT by 3 Subways',
 'Flatiron Oasis Off 5th Ave',
 'Freehand New York- Bunk Room',
 'Gorgeous Gramercy Apt',
 'Private room + office in designer luxury penthouse',
 'Chelsea 1 BR in 4BR Penthouse Apt.',
 'Bright, modern 2 bedroom oasis middle of Flatiron!',
 'Large 1 BR apt in the heart of Flatiron (NYC)',
 'New Flatiron King Bed Apartment',
 'Garden apartment in the heart of Gramercy',
 'Large Private Bedroom with a High-rise View in NYC',
 'CITY VIEWS LARGE APARTMENT',
 'Charming bedroom in the heart of Flatiron',
 'Rad Chelsea 2BR w/ Sundeck, Doorman + Rooftop views by Blueground',
 'Studio Apt in the Heart of Flatiron',
 'Stunning views - prime Gramercy/Flatiron location!',
 'Best Midtown Location! 5 Bedrooms!',
 '4Bed Penthouse! Terrace! Location! 5th Ave',
 'Big Room w Private Entrance in Bohemian Art Loft',
 'Classy and CLEAN Designer Home in NYC 2bath',
 'Mid-Century Modern near Madison Square Park',
 'Elegant 2bdrm apt in the Center of NYC',
 'Duplex Residence with Breathtaking NYC View!',
 'Perfectly Located Apartment in Gramercy',
 'Cheery 1BR in Chelsea w/Gym, Doorman, great Rooftop views by Blueground',
 'Gorgeous PermaGO Private Room in FiDi - 1/2',
 'TriBeCa Amazing River View Loft 3BR',
 'Everyone who stays leaves happy!',
 '2 BED TriBeCa, Beautiful-Renovated!',
 'Beautiful duplex loft with Skylight',
 'Luxury Tribeca 1bdr in Doorman Bldg',
 'Spacious Loft in heart of Tribeca',
 'TriBeCa 2500 Sq Ft w/ Priv Elevator',
 'Tribeca Loft w/ Private Elevator',
 'Authentic Soho Loft (1200 sq ft)',
 'Stunning Sundrenched Tribeca Loft',
 'Suite Spot in Tribeca',
 'AUTHENTIC TRIBECA LOFT NEAR SOHO',
 'Tribeca Loft for Superbowl Wknd',
 'Fantastic Soho/Tribeca Loft',
 'Working Fireplace in TriBeCa loft',
 'Luxury Alcove Studio Apt in TriBeCa',
 'Newly Built Full Bedroom In TriBeCa',
 'HUGE LUX 2FLOOR 2 BDRMSOHO LOFTw/HOME CINEMA',
 '2 Story Loft!! Tribeca/Soho :-) best neighborhood',
 'last minute TRIBECA CONDO AVAILABLE',
 'Modern XL Tribeca apt with terrace ',
 'Stylish 3,000 sq ft loft in TriBeCa',
 'SOHO GALLERY',
 'Best location \& Amazing view / Apt in Tribeca',
 'The TriBeCa Apartment — Spacious Living with View',
 'Luxury 2bdr 2bath in Tribeca',
 'PRIVATE Bedroom \& bathroom  TRIBECA',
 'Private bedroom in SOHO',
 'Heart of Tribeca next to everything',
 '3BR/1 Ba in TriBeCa w/ outdoor deck',
 'Room Epic View Near Freedom Tower',
 'Brand new in the heart of Tribeca',
 'Trendy TriBeCa SoHo Suite',
 'Private Balcony and views of WTC!',
 'Spacious TriBeCa 3BR w/ Balcony',
 'Heart of Downtown Tribeca',
 'Temporary Stay for 2 Weeks',
 'Beautiful one bedroom in Tribeca!',
 'Huge TriBeCa Loft, Shared Space 1Br',
 'Spacious 2 bedroom loft (1600 sf)',
 'LARGE TRIBECA LOFT WITH ROOF DECK',
 'Room in a loft in Tribeca',
 'Tribeca Loft',
 'Newly Renovated Tribeca 2 br',
 'Cozy Tribeca Studio',
 'SWING FROM THE CHANDELIER',
 'Tribeca launchpad!',
 'Private bedroom in Tribeca',
 'The authentic TriBeCa artist loft experience!',
 'Tribeca/Soho Garden Apartment',
 'Prime Location Luxury Tribeca Loft',
 'Beautiful Tribeca Loft',
 'Beautiful TriBeCa Apartment',
 'Loft',
 'Huge Room in Stunning Pre-war NY Loft',
 'Duane Street, Upscale Tribeca Studio',
 'Duane Street, Upscale Tribeca 1bd',
 'Classic NYC Loft in the heart of Tribeca',
 'Luxe 1-br Large Loft in Tribeca, Entire Apt',
 'Sunny beautiful bedroom in 1 bedroom apartment.',
 'Tribeca Light filled/ Views Apt',
 'Spacious room in huge loft in Tribeca',
 'Tribeca Luxury 2000sf Loft',
 '1 bedroom in Tribeca',
 'Peaceful and Quiet in the heart of TriBeca',
 "Fantastical Artist's loft in Tribeca",
 'Stunning 4 Bed Tribeca Penthouse w/ Huge Terrace!',
 "Inviting Photographer's Loft in Tribeca",
 'Room w/ Private Balcony River View',
 'SOHO,TRIBECA,LOFT,4500sqft.',
 'Spacious light tribeca loft!',
 'Your Fab Home Away from Home awaits You in NYC!!!!',
 'Modern, Beautiful Tribeca 2-Bedroom Loft',
 'Downtown NYC Luxury Apartment - TriBeCa',
 'Big, Bright, Tribeca Studio w/ Doorman \& Elevator',
 '2400 Sq Ft Tribeca Loft w/Private Elevator',
 'Big 1-bedroom in Tribeca with landscaped roof deck',
 'Spacious private room in luxury building',
 'Cozy gem in the  heart of TriBeca!!',
 'Bright Quiet Airy Tribeca Loft',
 'Good Vibes Tribeca Loft',
 'Luxe, Central Loft in Downtown Manhattan',
 'Must Love Dogs and Tribeca NYC',
 'Super Cute Family Friendly Cozy Loft Suite For 2-4',
 '3.7 MLN usd 2 bedroom LOFT in TriBeCa (5)',
 '3.5 MLN usd 2 bedroom LOFT in TriBeCa (4)',
 '3.5 MLN usd 2 bedroom LOFT in TriBeCa  (2)',
 'Prime Tribeca Loft',
 'Luxury Skyline Views! Best Panaromic Views Of NYC.',
 'Large luxury apartment in Tribeca',
 'LeonardLoft',
 'Authentic and Open Tribeca Loft',
 'Incredible Tribeca Loft: natural light, spacious',
 'The "TriBeCa LOFT" \#3 | A stylish 2 bed apt',
 'The "TriBeCa Loft" \#5 | A brand New 2 beds Loft',
 '1 Bedroom Apartment in Tribeca',
 "The 'TriBeCa Loft'  \#4  | A stylish 2 bed apt",
 "The 'TriBeCa Loft' \#2 | A stylish 2 bed apt",
 'Newly Renovated Studio Apartment',
 'Luxury Tribeca',
 'Beautiful/Spacious 1 bed luxury flat-TriBeCa/Soho',
 'Spacious 1 Bedroom in TriBeCa',
 'Architect Loft,  btw Soho \& Tribeca, Private Roof',
 'Luxury Tribeca 1BR w/ Gym, Doorman + Roof deck by Blueground',
 'Private Room in spacious TriBeCa Loft',
 'NY’s Highest End Celebrity Building + Balconies!',
 'Bright, Winged Tribeca Studio w/ Indoor pool, Gym by Blueground',
 'SoBecaTown 1 Bedroom',
 'Loft with View of the Park',
 'Tribeca Luxury Doorman Apartment with Park Views',
 'Classic Tribeca Loft',
 'Sweet Lower Manhattan/Tribeca loft Suite',
 'Penthouse Triplex Jewel - 3000sf',
 'Artist Loft in Tribeca',
 'Apartment in Tribeca with huge private terrace',
 'Huge Room for Nightly Stays Downtown or Monthly',
 'Private room in TRIBECA Loft, elevator into apt!',
 'Perfect Bedroom  W/En Suite Bath \& Terrace Access',
 'Sweet Tribeca Studio w/ Great views + Indoor pool by Blueground',
 'TRIBECA/SOHO 2 BEDROOM LUXURY LOFT',
 'Quintessential Tribeca Loft',
 'Classic, yet Unconventional Tribeca New York City!',
 'Tribeca - Large 4 bedroom 2 bathroom for Xmas/NY',
 'Private Room in Charming TriBeCa Loft',
 'Smart Studio in Trendy Tribeca, Indoor pool + Gym by Blueground',
 'Classic, yet Unconventional Tribeca NYC Extra Room',
 'A Luxury Studio in the Heart of Greenwich Village!',
 'Bespoke Tribeca Studio, Indoor pool + Great views by Blueground',
 'Splendid Tribeca 1BR w/ Gym, Doorman + Valet by Blueground',
 'Stunning Tribeca 2BR w/ Indoor pool, Gym, Rooftop by Blueground',
 'Cheery Tribeca Studio w/ Gym + Indoor pool by Blueground',
 'Smart Tribeca Studio w/ Great views + Indoor pool by Blueground',
 'Dandy Tribeca Studio w/ Indoor pool, Views + Gym by Blueground',
 'Stylish Tribeca Studio w/ Gym, Doorman + Valet by Blueground',
 'Well-appointed Tribeca Studio w/ Indoor pool, Gym by Blueground',
 'Shining Tribeca Studio w/ Indoor pool + Gym by Blueground',
 'Homey Tribeca 2BR w/ Great views + Indoor pool by Blueground',
 'Mod Tribeca 1BR w/ Gym, Doorman + Rooftop garden by Blueground',
 'Bright + Mod Tribeca Studio w/ Indoor pool + Gym by Blueground',
 'Stunning Tribeca Studio w/ City views, Gym + Pool by Blueground',
 'Handsome Tribeca Studio w/ Indoor pool + Gym by Blueground',
 'Mod Tribeca Studio w/ Tons of light, Gym, Pool by Blueground',
 'Dazzling Tribeca 2BR w/ Indoor pool + Great views by Blueground',
 'Comfy Tribeca Studio w/ Gym, Doorman + Roof deck by Blueground',
 '2 BR/2BA Modern Apt in Prime TriBeCa Location',
 'Luxurious bedroom in Tribeca - walk to World Trade',
 'Beautiful 6BR + Terrace in SOHO! Dream Location!',
 'Terrific Tribeca 2BR, Indoor pool, Gym + Rooftop by Blueground',
 'Tribeca Loft',
 'Duane Street, Upscale Tribeca Studio',
 'Huge Apartment in TriBeCa',
 'Terrific Tribeca 1BR, Gym, Roof deck, Indoor pool by Blueground',
 'Tribeca Bedroom/Bathroom in Fabulous Penthouse',
 'Harrison Green by (Hidden by Airbnb)',
 'Tribeca Studio w/ Gym + Pool by Blueground',
 '2400 sq. ft. Luxury Tribeca Loft',
 'Beautiful Bright TriBeCa Loft - steps from Soho!',
 'Beautiful, eclectic large Soho-Tribeca 2-Bed Apt',
 '5BR Designer Loft in Soho/TriBeCa! Best Location!',
 'Luxe Modern Tribeca Studio',
 'Studio in doorman building in Tribeca',
 'Homey Tribeca Studio w/ Pool, Roofdeck, Gym \& View by Blueground',
 'Gorgeous Tribeca 2BR w/ Amazing city views + Gym by Blueground',
 'Tribeca 3.5 Bedroom Loft',
 'Ideal Tribeca Studio w/ Gym, W/D, Doorman, Pool, View by Blueground',
 'Gorgeous Tribeca Studio w/ Gym, W/D, Doorman, Pool, View, by Blueground',
 'Gorgeous \& Spacious Tribeca Loft Style Apartment',
 'Iconic Tribeca Loft',
 'Luxury TriBeCa Apartment at an amazing price',
 'HUGE Tribeca/SOHO Loft - 2,200 Square Feet!!',
 'Charming TriBeCa Loft - Avail for Summer',
 'Adorable TriBeCa neighborhood easy subway access!',
 'Quaint Tribeca Studio w/ Gym, W/D, Doorman, Garage, Valet, by Blueground',
 'Lux Tribeca Studio w/ Pool + Gym + View near City Hall by Blueground',
 "Stunning Luxury Loft in NYC's Best Neighborhood",
 'Luxury \& Spacious 1500 ft² MANHATTAN Townhouse',
 '*Unique Master BR in Battery Park!*',
 nan,
 'Space For guest',
 'Downtown, close to every subway!',
 'Luxury Building Huge Studio',
 'Bright Room in Battery Park!',
 'Loft Like Studio in Luxury Building',
 'October SPECIAL!! Enjoy the Holiday in NYC! Sale!',
 'One-of-a-Kind Luxury NYC EPIC VIEW!',
 'Giant Private Room in Battery Park ',
 'Battery Park City Sunny Bedroom ',
 'Statue of Liberty Views Downtown',
 'Amazing 1BR condo with water views',
 'Top Floor Doorman Apt-Water Views',
 'Luxurious 1BR Best Views in NYC! ',
 'Family summer on the Hudson - 1 wk. min. 8/16-9/4',
 '2 Bdrm in Luxury Condo on Hudson',
 'View Waterfront Studio - Manhattan',
 'Charming cozy bedroom, Downtown',
 '2 bed, 2 bath in Battery Park City',
 'Battery Park Monthly rental, great location.',
 'Private Cozy studio NBPC/Tribeca',
 'Large Family Size Apt. Ground Zero',
 'Furnished 2 bed | 2 bath w/ views',
 'Beautiful Luxury Tribeca Apartment',
 'Lower Manhattan Luxury',
 'Luxurious, modern, clean studio apt',
 'Room With a View!',
 'Enjoy One of a Kind Spectacular NYC Views',
 '***Lux Doorman/Furnished,Battery Park ***',
 'Luxury For Less In Downtown Manhattan',
 '**Amazing, Luxury Doorman, VIEW ,Battery Park**',
 'Furnished Battery Park Apartment',
 'Luxurious 1/1.5 (sleeps 4!) in Battery Park!',
 'Parks, Marina and New York skyline in one place.',
 'Downtown Luxury 1 Bedroom 800 sq ft',
 'Super Lux 2BR in Downtown Manhattan',
 'Private Bedroom w River View in Downtown Manhattan',
 'Chambers Street Luxury One Bedroom',
 'Cozy and Warm Stay in Fidi/Battery Park City',
 'Stunning view in TriBeCa luxury 2 bedrooms',
 'Spacious, 1 bdr apartment. Great light and views.',
 'Water views in two directions',
 '5 Star Quiet, Spacious Condo. Freedom Tower view',
 'Home Sweat Home',
 'One Beautiful Sunny Bedroom with Amazing Views',
 'A Night at Anchor Aboard Yacht Ventura',
 'Attractive FiDi 1BR w/ Office nook + Gym, Doorman by Blueground',
 'Cozy waterfront studio in downtown Manhattan.',
 'RENOVATED LUXURY 3BR 3BATH ON LITTLE WEST STREET',
 'Cozy One Bedroom Apartment In Downtown Manhattan',
 'Immaculate and Bright Apartment Downtown',
 'Neat FiDi Studio w/ Gym, Doorman, + Roof deck by Blueground',
 'A spacious 1 bedroom apt in a landmark building',
 'Luxury Apartment with Statue of Liberty view',
 'Studio at Battery Park, Downtown Manhattan',
 '*SUMMER SUBLET*Sunny Penthouse w/ Private Terrace*',
 'Beautiful Luxury Studio w/Exceptional Water View',
 'Cozy apartment w/ Magnificent View!',
 "70' Luxury MotorYacht on the Hudson",
 'Stylish new luxury apartment',
 'Look at that Suite City View!',
 'Harbor View for Two!',
 'Enjoy the Suite Life with a Harbor View!',
 'Magnificent View of the Statue of Liberty!',
 'Harbor View for a King!',
 'Lower Manhattan for the Family!',
 'The City That Never Sleep, with a View!',
 'Water View in Battery Park near Statue of Liberty',
 'Great apartment in downtown NYC for August',
 'Spacious center hall colonial',
 'brooklyn 14 bedroom gated community',
 'Charming house in Coney Island',
 'Comfortable and Spacious Bedroom',
 'Comfortable and Spacious Bedroom B',
 'My place 4 u',
 '"Sea Gate" Sunny, cozy, very clean studio app',
 'seagate pravite house 5 mins away from beach',
 'Three bedroom upscale condo',
 '1 Bedroom/1 Bathroom in Riverdale (close to HIR)',
 'Beautiful apartment with a loft.',
 'Fully furniture huge room in great apt',
 'Well located apartment near NY City',
 '"The luxury of Comfort"',
 'Luxury and comfort',
 "New York's Hidden Secret for luxury living",
 'Spacious Apt with Charm \& Character',
 'Quiet, luxury 1BR--15minutes to Manhattan!',
 'Riverdales finest!',
 'Private floor with private half-bath, living area',
 'Affordable Luxury Minutes to Manhattan',
 'Private Loft-style Bedroom \& En-suite in S.I., NY',
 'Staten island home not far from ferry to manhattan',
 'Victorian Film location',
 'RELAX \& UNWIND - Classy Unique HOUSE for 9 People',
 'Classy Modern 2 Beds for 2 People-Staten Island NY',
 'A happy home',
 'Fully Furnished Spacious Home for 7 People',
 'Nice room near SI Ferry \textbackslash{}n15 minutes by car.',
 'Classy Antique Private Bedroom 20-minutes to Ferry',
 'Staten Island retreat.',
 'Happy home 2',
 'Modern Staten Island Townhouse- Welcome home!',
 'Newly Renovated Spacious 2 Bedroom Apartment!',
 'Newly Renovated 3BR Apt,Minutes away from SI Ferry',
 'NYC cozy apartment close to staten island ferry',
 'Happy Home 3',
 'Newly renovated 1 bedroom apartment!',
 'Cute Lofted Apt.',
 "Anna's place  bed and breakfast",
 'Cozy farmhouse in NYC. 2 bdrms; 2 full baths. WiFi',
 'Central Hall Colonial with Free Parking Bus EXP NY',
 'Beach House Retreat. 15 minutes from Manhattan.']
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{280}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Tokenização e limpeza dos nomes dos locais}
\PY{n}{tokens\PYZus{}limpos} \PY{o}{=} \PY{p}{[}\PY{p}{]}
\PY{n}{stop\PYZus{}words} \PY{o}{=} \PY{n+nb}{set}\PY{p}{(}\PY{n}{stopwords}\PY{o}{.}\PY{n}{words}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{english}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
\PY{k}{for} \PY{n}{nome\PYZus{}local} \PY{o+ow}{in} \PY{n}{nomes\PYZus{}locais}\PY{p}{:}
    \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{nome\PYZus{}local}\PY{p}{,} \PY{n+nb}{str}\PY{p}{)}\PY{p}{:}  \PY{c+c1}{\PYZsh{} Verificar se o valor não é NaN}
        \PY{n}{tokens} \PY{o}{=} \PY{n}{word\PYZus{}tokenize}\PY{p}{(}\PY{n}{nome\PYZus{}local}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)}\PY{p}{)}  \PY{c+c1}{\PYZsh{} Tokenização e conversão para minúsculas}
        \PY{n}{tokens\PYZus{}limpos}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{p}{[}\PY{n}{token} \PY{k}{for} \PY{n}{token} \PY{o+ow}{in} \PY{n}{tokens} \PY{k}{if} \PY{n}{token} \PY{o+ow}{not} \PY{o+ow}{in} \PY{n}{stop\PYZus{}words} \PY{o+ow}{and} \PY{n}{token}\PY{o}{.}\PY{n}{isalpha}\PY{p}{(}\PY{p}{)}\PY{p}{]}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Calcular a frequência das palavras}
\PY{n}{frequencia\PYZus{}palavras} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{tokens\PYZus{}limpos}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Visualizar as palavras mais frequentes}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{frequencia\PYZus{}palavras}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
tribeca       134
loft          108
bedroom        59
studio         55
apartment      55
luxury         48
blueground     35
apt            32
private        30
view           29
gym            28
views          26
location       26
nyc            26
room           25
pool           24
spacious       24
manhattan      23
park           23
beautiful      21
dtype: int64
    \end{Verbatim}

    Aparentemente, nos 10 bairros mais caros, essas são as palavras
envolvidas que podem indicar o porque do valor ser mais alto nesses
bairros comparados à outros. LOFT definitivamente diz muito sobre o
imóvel e geralmente esse tipo costuma mesmo ter um alto valor.

    Explique como você faria a previsão do preço a partir dos dados. - Quais
variáveis e/ou suas transformações você utilizou e por quê? - Qual tipo
de problema estamos resolvendo (regressão, classificação)? - Qual modelo
melhor se aproxima dos dados e quais seus prós e contras? - Qual medida
de performance do modelo foi escolhida e por quê?

Para responder a estas perguntas teremos de selecionar atributos que
realmente são relevantes para a predição. Este é um caso de
\textbf{REGRESSÃO}, isto é, precisamos predizer um valor contínuo. Nem
todos os atributos de entrada servirão para este propósito. Analisando
cada atributo:

\begin{itemize}
\tightlist
\item
  id -- não acrescenta nenhum tipo de informação relevante
\item
  nome - contém informações uteis, mas são todos caracteres!
\item
  host\_id - não acrescenta nenhum tipo de informação relevante
\item
  host\_name -- não acrescenta nenhum tipo de informação relevante
\item
  bairro\_group - pode ser útil, mas é string! teria que transformar
\item
  bairro - pode ser útil, mas é string! teria que transformar
\item
  latitude - útil já que é uma forma de identificar a localização do
  bairro sem ser por uma string,
\item
  longitude - útil já que é uma forma de identificar a localização do
  bairro sem ser por uma string,
\item
  room\_type -- útil pois o tipo de quarto pode aumentar ou diminuir o
  valor do aluguel
\item
  price - esse é o atributo alvo!
\item
  minimo\_noites - útil para estimar um valor mínimo
\item
  numero\_de\_reviews - útil - significa que muitas pessoas alugaram
  aquele espaço
\item
  ultima\_review - pode vir a ser útil, mas sendo data, é necessário
  fazer uma transformação, mas talvez isso não contribua muito
\item
  reviews\_por\_mes - útil, mas sendo strings se torna mais complexo
  para predição de números.
\item
  calculado\_host\_listings\_count - Contém a quantidade de anuncios
  total por host
\item
  disponibilidade\_365 - talvez seja importante
\end{itemize}

Sem conversão de tipos podemos usar id, host\_id, latitude, longitue,
minimo\_noites, numero\_de\_reviews, reviews\_por\_mes,
disponibilidade\_365. Os atributos room\_type, bairro\_group e bairro
tem que ser convertidos.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{281}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{mapeamento\PYZus{}room\PYZus{}type} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Entire home/apt}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Private room}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{2}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Shared room}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{3}\PY{p}{\PYZcb{}}
\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{mapeamento\PYZus{}room\PYZus{}type}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
          room\_type  room\_type\_numerico
0   Entire home/apt                   1
1      Private room                   2
2   Entire home/apt                   1
3   Entire home/apt                   1
4   Entire home/apt                   1
5      Private room                   2
6      Private room                   2
7      Private room                   2
8   Entire home/apt                   1
9   Entire home/apt                   1
10     Private room                   2
11     Private room                   2
12     Private room                   2
13  Entire home/apt                   1
14  Entire home/apt                   1
15  Entire home/apt                   1
16     Private room                   2
17  Entire home/apt                   1
18  Entire home/apt                   1
19  Entire home/apt                   1
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{282}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{bairro\PYZus{}group\PYZus{}mapping} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bronx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Brooklyn}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{2}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Manhattan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{3}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Queens}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{4}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Staten Island}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{5}\PY{p}{\PYZcb{}}
\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{bairro\PYZus{}group\PYZus{}mapping}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
   bairro\_group  bairro\_group\_numerico
0     Manhattan                      3
1     Manhattan                      3
2      Brooklyn                      2
3     Manhattan                      3
4     Manhattan                      3
5      Brooklyn                      2
6     Manhattan                      3
7     Manhattan                      3
8     Manhattan                      3
9     Manhattan                      3
10    Manhattan                      3
11     Brooklyn                      2
12    Manhattan                      3
13    Manhattan                      3
14     Brooklyn                      2
15     Brooklyn                      2
16    Manhattan                      3
17     Brooklyn                      2
18    Manhattan                      3
19     Brooklyn                      2
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{283}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{bairros\PYZus{}unicos} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}
\PY{n}{mapeamento\PYZus{}bairros} \PY{o}{=} \PY{p}{\PYZob{}}\PY{n}{bairro}\PY{p}{:} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1} \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{bairro} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{bairros\PYZus{}unicos}\PY{p}{)}\PY{p}{\PYZcb{}}
\PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{mapeamento\PYZus{}bairros}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{dados}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                bairro  bairro\_numerico
0              Midtown                1
1               Harlem                2
2         Clinton Hill                3
3          East Harlem                4
4          Murray Hill                5
5   Bedford-Stuyvesant                6
6       Hell's Kitchen                7
7      Upper West Side                8
8            Chinatown                9
9      Upper West Side                8
10      Hell's Kitchen                7
11         South Slope               10
12     Upper West Side                8
13        West Village               11
14        Williamsburg               12
15         Fort Greene               13
16             Chelsea               14
17       Crown Heights               15
18         East Harlem                4
19        Williamsburg               12
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{284}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{284}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
     id                                              nome  host\_id  \textbackslash{}
0  2595                             Skylit Midtown Castle     2845
1  3647               THE VILLAGE OF HARLEM{\ldots}NEW YORK !     4632
2  3831                   Cozy Entire Floor of Brownstone     4869
3  5022  Entire Apt: Spacious Studio/Loft by central park     7192
4  5099         Large Cozy 1 BR Apartment In Midtown East     7322
5  5121                                   BlissArtsSpace!     7356
6  5178                  Large Furnished Room Near B'way      8967
7  5203                Cozy Clean Guest Room - Family Apt     7490
8  5238                Cute \& Cozy Lower East Side 1 bdrm     7549
9  5295                  Beautiful 1br on Upper West Side     7702

     host\_name bairro\_group              bairro  latitude  longitude  \textbackslash{}
0     Jennifer    Manhattan             Midtown  40.75362  -73.98377
1    Elisabeth    Manhattan              Harlem  40.80902  -73.94190
2  LisaRoxanne     Brooklyn        Clinton Hill  40.68514  -73.95976
3        Laura    Manhattan         East Harlem  40.79851  -73.94399
4        Chris    Manhattan         Murray Hill  40.74767  -73.97500
5        Garon     Brooklyn  Bedford-Stuyvesant  40.68688  -73.95596
6     Shunichi    Manhattan      Hell's Kitchen  40.76489  -73.98493
7    MaryEllen    Manhattan     Upper West Side  40.80178  -73.96723
8          Ben    Manhattan           Chinatown  40.71344  -73.99037
9         Lena    Manhattan     Upper West Side  40.80316  -73.96545

         room\_type  price  {\ldots}  ultima\_review  reviews\_por\_mes  \textbackslash{}
0  Entire home/apt    225  {\ldots}     2019-05-21             0.38
1     Private room    150  {\ldots}     2019-05-19             0.72
2  Entire home/apt     89  {\ldots}     2019-07-05             4.64
3  Entire home/apt     80  {\ldots}     2018-11-19             0.10
4  Entire home/apt    200  {\ldots}     2019-06-22             0.59
5     Private room     60  {\ldots}     2017-10-05             0.40
6     Private room     79  {\ldots}     2019-06-24             3.47
7     Private room     79  {\ldots}     2017-07-21             0.99
8  Entire home/apt    150  {\ldots}     2019-06-09             1.33
9  Entire home/apt    135  {\ldots}     2019-06-22             0.43

  calculado\_host\_listings\_count  disponibilidade\_365   ano  mes  dia  \textbackslash{}
0                             2                  355  2019    5   21
1                             1                  365  2019    5   19
2                             1                  194  2019    7    5
3                             1                    0  2018   11   19
4                             1                  129  2019    6   22
5                             1                    0  2017   10    5
6                             1                  220  2019    6   24
7                             1                    0  2017    7   21
8                             4                  188  2019    6    9
9                             1                    6  2019    6   22

   room\_type\_numerico  bairro\_group\_numerico  bairro\_numerico
0                   1                      3                1
1                   2                      3                2
2                   1                      2                3
3                   1                      3                4
4                   1                      3                5
5                   2                      2                6
6                   2                      3                7
7                   2                      3                8
8                   1                      3                9
9                   1                      3                8

[10 rows x 22 columns]
\end{Verbatim}
\end{tcolorbox}
        
    Vamos criar um novo dataframe que conterá apenas os atributos de
interesse

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{285}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{dados}\PY{o}{.}\PY{n}{columns}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{285}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
Index(['id', 'nome', 'host\_id', 'host\_name', 'bairro\_group', 'bairro',
       'latitude', 'longitude', 'room\_type', 'price', 'minimo\_noites',
       'numero\_de\_reviews', 'ultima\_review', 'reviews\_por\_mes',
       'calculado\_host\_listings\_count', 'disponibilidade\_365', 'ano', 'mes',
       'dia', 'room\_type\_numerico', 'bairro\_group\_numerico',
       'bairro\_numerico'],
      dtype='object')
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{286}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{new\PYZus{}data} \PY{o}{=} \PY{n}{dados}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{host\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{minimo\PYZus{}noites}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{numero\PYZus{}de\PYZus{}reviews}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reviews\PYZus{}por\PYZus{}mes}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{disponibilidade\PYZus{}365}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{room\PYZus{}type\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}group\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bairro\PYZus{}numerico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                  \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
\PY{n+nb}{print}\PY{p}{(} \PY{n}{new\PYZus{}data}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
   host\_id  latitude  longitude  minimo\_noites  numero\_de\_reviews  \textbackslash{}
0     2845  40.75362  -73.98377              1                 45
1     4632  40.80902  -73.94190              3                  0
2     4869  40.68514  -73.95976              1                270
3     7192  40.79851  -73.94399             10                  9
4     7322  40.74767  -73.97500              3                 74
5     7356  40.68688  -73.95596             45                 49
6     8967  40.76489  -73.98493              2                430
7     7490  40.80178  -73.96723              2                118
8     7549  40.71344  -73.99037              1                160
9     7702  40.80316  -73.96545              5                 53

   reviews\_por\_mes  disponibilidade\_365  room\_type\_numerico  \textbackslash{}
0             0.38                  355                   1
1             0.72                  365                   2
2             4.64                  194                   1
3             0.10                    0                   1
4             0.59                  129                   1
5             0.40                    0                   2
6             3.47                  220                   2
7             0.99                    0                   2
8             1.33                  188                   1
9             0.43                    6                   1

   bairro\_group\_numerico  bairro\_numerico  price
0                      3                1    225
1                      3                2    150
2                      2                3     89
3                      3                4     80
4                      3                5    200
5                      2                6     60
6                      3                7     79
7                      3                8     79
8                      3                9    150
9                      3                8    135
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{287}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{X} \PY{o}{=} \PY{n}{new\PYZus{}data}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)} \PY{c+c1}{\PYZsh{} atributos de entrada}
\PY{n}{y} \PY{o}{=} \PY{n}{new\PYZus{}data}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{c+c1}{\PYZsh{} atributo alvo \PYZhy{} número}

\PY{c+c1}{\PYZsh{} holdout: 30\PYZpc{} teste, 70\PYZpc{} treino}
\PY{n}{X\PYZus{}train}\PY{p}{,} \PY{n}{X\PYZus{}test}\PY{p}{,} \PY{n}{y\PYZus{}train}\PY{p}{,} \PY{n}{y\PYZus{}test} \PY{o}{=} \PY{n}{train\PYZus{}test\PYZus{}split}\PY{p}{(}\PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{test\PYZus{}size}\PY{o}{=}\PY{l+m+mf}{0.3}\PY{p}{,} \PY{n}{random\PYZus{}state}\PY{o}{=}\PY{l+m+mi}{42}\PY{p}{)}

\PY{c+c1}{\PYZsh{} normalize}
\PY{c+c1}{\PYZsh{} https://scikit\PYZhy{}learn.org/stable/modules/generated/sklearn.preprocessing.normalize.html}

\PY{c+c1}{\PYZsh{} padronização dos valores}
\PY{n}{scaler} \PY{o}{=} \PY{n}{StandardScaler}\PY{p}{(}\PY{p}{)}
\PY{n}{X\PYZus{}train\PYZus{}scaled} \PY{o}{=} \PY{n}{scaler}\PY{o}{.}\PY{n}{fit\PYZus{}transform}\PY{p}{(}\PY{n}{X\PYZus{}train}\PY{p}{)}
\PY{n}{X\PYZus{}test\PYZus{}scaled} \PY{o}{=} \PY{n}{scaler}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{)}


\PY{c+c1}{\PYZsh{} https://scikit\PYZhy{}learn.org/stable/modules/linear\PYZus{}model.html}
\PY{n}{modelos} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Regressão Linear}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{LinearRegression}\PY{p}{(}\PY{p}{)}\PY{p}{,}    
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Regressão Ridge}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{Ridge}\PY{p}{(}\PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Regressão Lasso}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{Lasso}\PY{p}{(}\PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Árvore de Decisão}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{DecisionTreeRegressor}\PY{p}{(}\PY{n}{random\PYZus{}state}\PY{o}{=}\PY{l+m+mi}{42}\PY{p}{)}
    
    \PY{c+c1}{\PYZsh{} Esses modelos estavam travando meu computador}
    \PY{c+c1}{\PYZsh{} \PYZsq{}Random Forest\PYZsq{}: RandomForestRegressor(random\PYZus{}state=42),}
    \PY{c+c1}{\PYZsh{} \PYZsq{}SVR\PYZsq{}: SVR(kernel=\PYZsq{}rbf\PYZsq{}),    }
\PY{p}{\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{288}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{resultados} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MAE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MSE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RMSE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{R2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{k}{for} \PY{n}{nome}\PY{p}{,} \PY{n}{modelo} \PY{o+ow}{in} \PY{n}{modelos}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}    
    \PY{n}{modelo}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{X\PYZus{}train\PYZus{}scaled}\PY{p}{,} \PY{n}{y\PYZus{}train}\PY{p}{)} \PY{c+c1}{\PYZsh{} fit = treinar}
    \PY{n}{y\PYZus{}pred} \PY{o}{=} \PY{n}{modelo}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test\PYZus{}scaled}\PY{p}{)} \PY{c+c1}{\PYZsh{} predict = predizer}
    
    \PY{c+c1}{\PYZsh{}modelo.fit(X\PYZus{}train, y\PYZus{}train)}
    \PY{c+c1}{\PYZsh{}y\PYZus{}pred = modelo.predict(X\PYZus{}test)}
    
    \PY{c+c1}{\PYZsh{} Calcular as métricas}
    \PY{c+c1}{\PYZsh{} mpe = mean\PYZus{}percentage\PYZus{}error(y\PYZus{}test, y\PYZus{}pred)}
    \PY{n}{mse} \PY{o}{=} \PY{n}{mean\PYZus{}squared\PYZus{}error}\PY{p}{(}\PY{n}{y\PYZus{}test}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}
    \PY{n}{mae} \PY{o}{=} \PY{n}{mean\PYZus{}absolute\PYZus{}error}\PY{p}{(}\PY{n}{y\PYZus{}test}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}    
    \PY{n}{rmse} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(}\PY{n}{mse}\PY{p}{)}
    \PY{n}{mape} \PY{o}{=} \PY{n}{mean\PYZus{}absolute\PYZus{}percentage\PYZus{}error}\PY{p}{(}\PY{n}{y\PYZus{}test}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}    
    \PY{n}{r2} \PY{o}{=} \PY{n}{r2\PYZus{}score}\PY{p}{(}\PY{n}{y\PYZus{}test}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}  
    
    \PY{n}{temp\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Nome}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{n}{nome}\PY{p}{]}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MAE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{n}{mae}\PY{p}{]}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MSE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{n}{mse}\PY{p}{]}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RMSE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{n}{rmse}\PY{p}{]}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MAPE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{n}{mape}\PY{p}{]}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{R2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{p}{[}\PY{n}{r2}\PY{p}{]}\PY{p}{\PYZcb{}}\PY{p}{)}   
    
    \PY{n}{resultados} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{resultados}\PY{p}{,} \PY{n}{temp\PYZus{}df}\PY{p}{]}\PY{p}{,} \PY{n}{ignore\PYZus{}index}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}    
    
    \PY{n}{predicted} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{n}{y\PYZus{}pred}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}    
    \PY{n}{saidas} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{[}\PY{n}{y\PYZus{}test}\PY{p}{,} \PY{n}{predicted}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{T}
    \PY{n}{saidas}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Real}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Predito}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}    
    
    \PY{c+c1}{\PYZsh{} Exibir os resultados}
    \PY{c+c1}{\PYZsh{} print(f\PYZsq{}\PYZob{}nome\PYZcb{}:\PYZsq{})    }
    \PY{c+c1}{\PYZsh{} print(f\PYZsq{}MAE = \PYZob{}mae\PYZcb{}\PYZsq{})}
    \PY{c+c1}{\PYZsh{} print(f\PYZsq{}MSE = \PYZob{}mse\PYZcb{}\PYZsq{})}
    \PY{c+c1}{\PYZsh{} print(f\PYZsq{}RMSE = \PYZob{}rmse\PYZcb{}\PYZsq{})}
    \PY{c+c1}{\PYZsh{} print(f\PYZsq{}R² = \PYZob{}r2\PYZcb{}\PYZsq{})}
    \PY{c+c1}{\PYZsh{} print(\PYZdq{}Preços Preditos:\PYZdq{}, predicted)}
    \PY{c+c1}{\PYZsh{} print()}
    
\PY{n+nb}{print}\PY{p}{(}\PY{n}{resultados}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{n}{saidas}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
                Nome        MAE            MSE        RMSE        R2  \textbackslash{}
0   Regressão Linear  72.773423   41327.801197  203.292403  0.103697
1    Regressão Ridge  72.773273   41327.791053  203.292378  0.103697
2    Regressão Lasso  72.596626   41325.549188  203.286864  0.103746
3  Árvore de Decisão  87.632286  100959.264572  317.740876 -1.189569

           MAPE
0  2.751135e+13
1  2.751158e+13
2  2.774616e+13
3  3.960491e+13
        Real  Predito
879    110.0    115.0
47429   40.0      NaN
15394   57.0      NaN
24100  375.0      NaN
16332  195.0      NaN
{\ldots}      {\ldots}      {\ldots}
9370    55.0     75.0
44291  239.0      NaN
9164   250.0     99.0
11841  125.0    255.0
46957   97.0      NaN

[14669 rows x 2 columns]
    \end{Verbatim}

    Usando validação cruzada de 10 folds

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{289}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Definir as métricas a serem usadas para avaliação}
\PY{n}{scorer\PYZus{}mse} \PY{o}{=} \PY{n}{make\PYZus{}scorer}\PY{p}{(}\PY{n}{mean\PYZus{}squared\PYZus{}error}\PY{p}{)}
\PY{n}{scorer\PYZus{}mape} \PY{o}{=} \PY{n}{make\PYZus{}scorer}\PY{p}{(}\PY{k}{lambda} \PY{n}{y\PYZus{}true}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{abs}\PY{p}{(}\PY{p}{(}\PY{n}{y\PYZus{}true} \PY{o}{\PYZhy{}} \PY{n}{y\PYZus{}pred}\PY{p}{)} \PY{o}{/} \PY{n}{y\PYZus{}true}\PY{p}{)}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{100}\PY{p}{)}
\PY{n}{scorer\PYZus{}mpe} \PY{o}{=} \PY{n}{make\PYZus{}scorer}\PY{p}{(}\PY{k}{lambda} \PY{n}{y\PYZus{}true}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{(}\PY{n}{y\PYZus{}true} \PY{o}{\PYZhy{}} \PY{n}{y\PYZus{}pred}\PY{p}{)} \PY{o}{/} \PY{n}{y\PYZus{}true}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{100}\PY{p}{)}
\PY{n}{scorer\PYZus{}rmse} \PY{o}{=} \PY{n}{make\PYZus{}scorer}\PY{p}{(}\PY{k}{lambda} \PY{n}{y\PYZus{}true}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{:} \PY{n}{np}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(}\PY{n}{mean\PYZus{}squared\PYZus{}error}\PY{p}{(}\PY{n}{y\PYZus{}true}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\PY{n}{scorer\PYZus{}r2} \PY{o}{=} \PY{n}{make\PYZus{}scorer}\PY{p}{(}\PY{n}{r2\PYZus{}score}\PY{p}{)}
\PY{n}{scorer\PYZus{}mae} \PY{o}{=} \PY{n}{make\PYZus{}scorer}\PY{p}{(}\PY{n}{mean\PYZus{}absolute\PYZus{}error}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Inicializar os modelos de regressão}
\PY{n}{modelos} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Regressão Linear}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{LinearRegression}\PY{p}{(}\PY{p}{)}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Árvore de Decisão}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{DecisionTreeRegressor}\PY{p}{(}\PY{n}{random\PYZus{}state}\PY{o}{=}\PY{l+m+mi}{42}\PY{p}{)}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Regressão Ridge}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{Ridge}\PY{p}{(}\PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Regressão Lasso}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{Lasso}\PY{p}{(}\PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}
    \PY{c+c1}{\PYZsh{} \PYZsq{}SVR\PYZsq{}: SVR(kernel=\PYZsq{}rbf\PYZsq{}),}
    \PY{c+c1}{\PYZsh{}\PYZsq{}Random Forest\PYZsq{}: RandomForestRegressor(random\PYZus{}state=42),}
\PY{p}{\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{290}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Normalizar os dados}
\PY{n}{scaler} \PY{o}{=} \PY{n}{StandardScaler}\PY{p}{(}\PY{p}{)}
\PY{n}{X} \PY{o}{=} \PY{n}{scaler}\PY{o}{.}\PY{n}{fit\PYZus{}transform}\PY{p}{(}\PY{n}{X}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Avaliar cada modelo utilizando validação cruzada de 10 folds}
\PY{k}{for} \PY{n}{nome}\PY{p}{,} \PY{n}{modelo} \PY{o+ow}{in} \PY{n}{modelos}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Calcular os scores de validação cruzada para o modelo}
    \PY{n}{scores\PYZus{}mse} \PY{o}{=} \PY{n}{cross\PYZus{}val\PYZus{}score}\PY{p}{(}\PY{n}{modelo}\PY{p}{,} \PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{cv}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{scoring}\PY{o}{=}\PY{n}{scorer\PYZus{}mse}\PY{p}{)}
    \PY{n}{scores\PYZus{}mape} \PY{o}{=} \PY{n}{cross\PYZus{}val\PYZus{}score}\PY{p}{(}\PY{n}{modelo}\PY{p}{,} \PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{cv}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{scoring}\PY{o}{=}\PY{n}{scorer\PYZus{}mape}\PY{p}{)}
    \PY{n}{scores\PYZus{}mpe} \PY{o}{=} \PY{n}{cross\PYZus{}val\PYZus{}score}\PY{p}{(}\PY{n}{modelo}\PY{p}{,} \PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{cv}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{scoring}\PY{o}{=}\PY{n}{scorer\PYZus{}mpe}\PY{p}{)}
    \PY{n}{scores\PYZus{}rmse} \PY{o}{=} \PY{n}{cross\PYZus{}val\PYZus{}score}\PY{p}{(}\PY{n}{modelo}\PY{p}{,} \PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{cv}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{scoring}\PY{o}{=}\PY{n}{scorer\PYZus{}rmse}\PY{p}{)}
    \PY{n}{scores\PYZus{}r2} \PY{o}{=} \PY{n}{cross\PYZus{}val\PYZus{}score}\PY{p}{(}\PY{n}{modelo}\PY{p}{,} \PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{cv}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{scoring}\PY{o}{=}\PY{n}{scorer\PYZus{}r2}\PY{p}{)}
    \PY{n}{scores\PYZus{}mae} \PY{o}{=} \PY{n}{cross\PYZus{}val\PYZus{}score}\PY{p}{(}\PY{n}{modelo}\PY{p}{,} \PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{cv}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{scoring}\PY{o}{=}\PY{n}{scorer\PYZus{}mae}\PY{p}{)}
    
    \PY{c+c1}{\PYZsh{} Obter as previsões durante a validação cruzada}
    \PY{n}{predicted} \PY{o}{=} \PY{n}{cross\PYZus{}val\PYZus{}predict}\PY{p}{(}\PY{n}{modelo}\PY{p}{,} \PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{cv}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}
    \PY{n}{predicted} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{n}{predicted}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
    
    \PY{c+c1}{\PYZsh{} Exibir os resultados}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{nome}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Média do MSE: }\PY{l+s+si}{\PYZob{}}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{scores\PYZus{}mse}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Média do MAPE: }\PY{l+s+si}{\PYZob{}}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{scores\PYZus{}mape}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Média do MPE: }\PY{l+s+si}{\PYZob{}}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{scores\PYZus{}mpe}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Média do RMSE: }\PY{l+s+si}{\PYZob{}}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{scores\PYZus{}rmse}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Média do R2: }\PY{l+s+si}{\PYZob{}}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{scores\PYZus{}r2}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Média do MAE: }\PY{l+s+si}{\PYZob{}}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{scores\PYZus{}mae}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Preços Preditos: }\PY{l+s+si}{\PYZob{}}\PY{n}{predicted}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
    \PY{n+nb}{print}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Regressão Linear:
Média do MSE: 52587.78284205892
Média do MAPE: inf
Média do MPE: nan
Média do RMSE: 226.7016923959988
Média do R2: 0.08910569942267962
Média do MAE: 75.0418408436335
Preços Preditos: [265.03 163.69 128.84 {\ldots} 207.51  23.04 126.85]

Árvore de Decisão:
Média do MSE: 129740.76757506207
Média do MAPE: inf
Média do MPE: -inf
Média do RMSE: 348.29066856026736
Média do R2: -1.2621643939139893
Média do MAE: 99.15215782184539
Preços Preditos: [ 995.  100.  150. {\ldots}  160.  125. 3000.]

Regressão Ridge:
Média do MSE: 52587.78203390505
Média do MAPE: inf
Média do MPE: nan
Média do RMSE: 226.7016885967048
Média do R2: 0.0891057507539286
Média do MAE: 75.041731996586
Preços Preditos: [265.03 163.69 128.84 {\ldots} 207.51  23.04 126.85]

Regressão Lasso:
Média do MSE: 52583.42273181339
Média do MAPE: inf
Média do MPE: nan
Média do RMSE: 226.6903138019618
Média do R2: 0.08922637334881739
Média do MAE: 74.84379669251177
Preços Preditos: [263.31 162.38 131.79 {\ldots} 206.55  23.72 126.26]

    \end{Verbatim}

    O modelo de regressão logística teve um melhor desempenho que o modelo
de árvore de decisão. Seria necessário fazer um tunning mais profundo de
parametros, para se chegar a resultados de desempenho melhores. Eu
escolhi esses modelos por eles serão os básico e padrões. Os outros
modelos tentei executar, mas meu computador é muito velho e não deu
conta.

A R2 é a melhor medida pois tem um valor mais baixo que o dos outros
modelos, já que para modelos de regressão, quanto menor o valor do
resultado, melhor. De qualquer forma, o modelo não conseguiu predizer
alguns valores. Infelizmente ainda não sei muito sobre regressão e,
portanto, não consigo dar muitos insights a respeito.


    % Add a bibliography block to the postdoc
    
    
    
\end{document}
